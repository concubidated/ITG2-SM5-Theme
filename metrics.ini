[Global]
FallbackTheme=_fallback

[Common]
AutoSetStyle=false
InitialScreen="ScreenCompany"

[GameState]
AllowLateJoin=false

[SongManager]
NumSongGroupColors=1
SongGroupColor1=color("#FFFFFF")
NumCourseGroupColors=1
CourseGroupColor1=color("1,1,1,1") -- white

[Course]
SortLevel1Color=color("1,1,1,1")
SortLevel2Color=color("1,1,1,1")
SortLevel3Color=color("1,1,1,1")
SortLevel4Color=color("1,1,1,1")
SortLevel5Color=color("1,1,1,1")

[PlayerStageStats]
NumGradeTiersUsed=17
GradeTier01IsAllW2s=false
GradeTier02IsAllW2s=false
-- quad star
GradePercentTier01=1.00
-- triple star
GradePercentTier02=0.99
-- double star
GradePercentTier03=0.98
-- single star
GradePercentTier04=0.97
-- S+
GradePercentTier05=0.94
-- S
GradePercentTier06=0.92
-- S-
GradePercentTier07=0.89
-- A+
GradePercentTier08=0.86
-- A
GradePercentTier09=0.83
-- A-
GradePercentTier10=0.80
-- B+
GradePercentTier11=0.76
-- B
GradePercentTier12=0.72
-- B-
GradePercentTier13=0.68
-- C+
GradePercentTier14=0.64
-- C
GradePercentTier15=0.60
-- C-
GradePercentTier16=0.55
-- D
GradePercentTier17=-1000

[ScreenNetworkOptions]
Class="ScreenNetworkOptions"
Fallback="ScreenOptionsServiceChild"
NextScreen=Branch.Network()
PrevScreen=Branch.Network()

[RollingNumbers]
# no communists
Commify=false
DiffuseLeadingZeroes=false

[RollingNumbersMaxCombo]
Fallback="RollingNumbersJudgment"
TextFormat="%06.0f"

[CodeDetector]
ModeMenu1="MenuLeft-MenuRight-Start"
ModeMenu2="Select-Start"

Mirror=
Left=
Right=
Shuffle=
SuperShuffle=
NextTransform=
NextScrollSpeed=
PreviousScrollSpeed=
NextAccel=
NextEffect=
NextAppearance=
NextTurn=
Reverse=
HoldNotes=
Mines=
Dark=
Hidden=
RandomVanish=
CancelAll=

CancelAllPlayerOptions="Left,Right,Left,Right,Left,Right"
SaveScreenshot1="MenuLeft+MenuRight"
SaveScreenshot2="Select"

################################################################################
# layers
[ScreenSystemLayer]
CreditsP1X=SCREEN_LEFT+20
CreditsP1Y=SCREEN_BOTTOM-6
CreditsP1OnCommand=shadowlength,0;halign,0;valign,1;zoom,0.6

CreditsP2X=SCREEN_RIGHT-20
CreditsP2Y=SCREEN_BOTTOM-6
CreditsP2OnCommand=shadowlength,0;halign,1;valign,1;zoom,0.6

[ScreenDebugOverlay]
LineSpacing=18
ButtonTextOnCommand=NoStroke;zoom,0.7
FunctionTextOnCommand=NoStroke;zoom,0.7
################################################################################
# classes/screen fallbacks
[ScreenWithMenuElements]
ShowHeader=true
HeaderX=
HeaderY=
HeaderOnCommand=draworder,100;addy,-100;decelerate,0.8;addy,100
HeaderOffCommand=accelerate,0.5;addy,-100

ShowFooter=true
FooterX=SCREEN_CENTER_X
FooterY=SCREEN_BOTTOM-17-14
FooterOnCommand=draworder,10
FooterOffCommand=

ShowStyleIcon=false
StyleIconX=SCREEN_RIGHT-260
StyleIconY=SCREEN_TOP+57
StyleIconOnCommand=draworder,10;addx,SCREEN_WIDTH/2;sleep,1;decelerate,0.3;addx,-SCREEN_WIDTH/2
StyleIconOffCommand=accelerate,0.3;addx,SCREEN_WIDTH/2;addy,-36.5

ShowStageDisplay=false
StageDisplayX=SCREEN_LEFT+60
StageDisplayY=SCREEN_TOP+54
StageDisplayOnCommand=zoom,0.6;draworder,500
StageDisplayOffCommand=zoom,1;decelerate,0.7;zoom,0

TimerX=SCREEN_RIGHT-86
TimerY=SCREEN_TOP+38.5
TimerOnCommand=draworder,101;zoom,1;skewx,-0.3
TimerOffCommand=

ShowHelp=false
HelpY=SCREEN_BOTTOM-36
HelpX=SCREEN_CENTER_X
HelpOnCommand=draworder,200;zoom,0.7;shadowlength,1.5;diffusealpha,0;diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#9A9999");effectperiod,1.5;sleep,1;linear,0.3;diffusealpha,1

[MenuTimer]
Text1OnCommand=stoptweening;shadowlength,0;zoom,1.1;x,2;horizalign,right
Text1FormatFunction=function(fSeconds) fSeconds=math.floor(fSeconds); return string.format("%02.0f",fSeconds) end
Text2OnCommand=stoptweening;shadowlength,0;zoom,0.85;x,1;y,4;horizalign,left
Text2FormatFunction=function(fSeconds) local remainder=fSeconds-math.floor(fSeconds); local digit=math.floor(remainder*10); return "."..digit end

WarningStart=6
WarningBeepStart=6
WarningCommand6=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1.1); self:glowshift(); self:effectperiod(0.5); self:effectcolor1(1,0,0,1); self:effectcolor2(1,0,0,0); end
WarningCommand5=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1.1); end
WarningCommand4=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1.1); end
WarningCommand3=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1.1); end
WarningCommand2=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1.1); end
WarningCommand1=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1.1); end
WarningCommand0=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:stopeffect(); end

[HelpDisplay]
TipSwitchTime=3.5
TipOnCommand=shadowlength,0;diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#9A9999");effectperiod,1.5

[ScreenWithMenuElementsBlank]
Fallback="ScreenWithMenuElements"
ShowHeader=false

[ScreenSelectMasterBlank]
Fallback="ScreenSelectMaster"
ShowHeader=false
ShowIcon=false
ShowScroller=false

#========#

[OptionRow]
ShowBpmInSpeedTitle=true

TitleX=SCREEN_CENTER_X-360
TitleOnCommand=shadowlength,0;zoom,.5;horizalign,left;maxwidth,240
TitleGainFocusCommand=diffuse,color("1,1,1,1");strokecolor,color("0,0,0,1")
TitleLoseFocusCommand=diffuse,color("0.5,0.5,0.5,1");strokecolor,color("0,0,0,1")

ItemsStartX=SCREEN_CENTER_X-205
ItemsEndX=SCREEN_CENTER_X+240
ItemsGapX=10
ItemsOnCommand=shadowlength,0;zoom,0.5

ItemsLongRowP1X=SCREEN_CENTER_X-60
ItemsLongRowP2X=SCREEN_CENTER_X+100
ItemsLongRowSharedX=SCREEN_CENTER_X+20

ColorSelected=color("1,1,1,1")
ColorNotSelected=color("#808080FF")
ColorDisabled=color("0.5,0.5,0.5,1")

[OptionRowService]

TitleX=SCREEN_CENTER_X-205
TitleY=SCREEN_CENTER_Y-240
TitleOnCommand=shadowlength,0;zoom,.5;horizalign,left;
TitleGainFocusCommand=diffuse,color("1,1,1,1");strokecolor,color("0,0,0,1")
TitleLoseFocusCommand=diffuse,color("0.5,0.5,0.5,1");strokecolor,color("0,0,0,1")

[OptionRowExit]
ItemOnCommand=visible,false
ItemsLongRowSharedX=SCREEN_CENTER_X

[ScreenOptions]
PageX=SCREEN_CENTER_X
PageY=SCREEN_CENTER_Y-20
PageOnCommand=zoomx,0.9;zoomy,1

NumRowsShown=8
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	self:y(SCREEN_CENTER_Y-130+30*offsetFromCenter) \
end

ShowScrollBar=true
ScrollBarX=SCREEN_CENTER_X-387
ScrollBarY=SCREEN_CENTER_Y-10
ScrollBarHeight=265
ScrollBarTime=.2

ExplanationTogetherX=SCREEN_CENTER_X-266
ExplanationTogetherY=SCREEN_CENTER_Y+145
ExplanationTogetherOnCommand=zoom,0.5;wrapwidthpixels,1000;valign,0;halign,0;cropright,1;linear,0.5;cropright,0

ExplanationP1X=SCREEN_CENTER_X-350
ExplanationP1Y=SCREEN_CENTER_Y+145
ExplanationP1OnCommand=zoom,0.5;wrapwidthpixels,550;vertalign,top;halign,0;shadowlength,2;cropright,1;linear,0.5;cropright,0;diffuse,PlayerColor(PLAYER_1)

ExplanationP2X=SCREEN_CENTER_X+350
ExplanationP2Y=SCREEN_CENTER_Y+145
ExplanationP2OnCommand=zoom,0.5;wrapwidthpixels,550;vertalign,top;halign,1;shadowlength,2;cropright,1;linear,0.5;cropright,0;diffuse,PlayerColor(PLAYER_2)

DisqualifyP1X=SCREEN_CENTER_X-160
DisqualifyP1Y=SCREEN_CENTER_Y+111
DisqualifyP1OnCommand=zoom,0.5;glowshift;effectcolor2,color("1,.9,0.2,0.8");draworder,100;diffusealpha,0
DisqualifyP1OffCommand=
DisqualifyP2X=SCREEN_CENTER_X+160
DisqualifyP2Y=SCREEN_CENTER_Y+111
DisqualifyP2OnCommand=zoom,0.5;glowshift;effectcolor2,color(".4,1,.2,0.8");draworder,100;diffusealpha,0
DisqualifyP2OffCommand=

ShowExitRow=true
SeparateExitRowY=SCREEN_CENTER_Y+112

MoreX=SCREEN_CENTER_X
MoreY=SCREEN_CENTER_Y+112
MoreOnCommand=

MoreExitSelectedP1Command=
MoreExitSelectedP2Command=
MoreExitUnselectedP1Command=
MoreExitUnselectedP2Command=

LineHighlightP1OnCommand=x,490;zoomto,619.5,31;ztest,true;blend,Blend.Add;diffuseshift;effectcolor1,color("#ffa800");effectcolor2,color("#ffeecc");diffusealpha,0.5
LineHighlightP1ChangeCommand=
LineHighlightP1ChangeToExitCommand=

LineHighlightP2OnCommand=x,490;zoomto,619.5,31;ztest,true;blend,Blend.Add;diffuseshift;effectcolor1,color("#ffa800");effectcolor2,color("#ffeecc");diffusealpha,0.5
LineHighlightP2ChangeCommand=
LineHighlightP2ChangeToExitCommand=

[OptionsUnderline]

[OptionsUnderlineP1]
Fallback="OptionsUnderline"
LeftX=0
MiddleX=0
RightX=0
LeftY=0
MiddleY=0
RightY=0

[OptionsUnderlineP2]
Fallback="OptionsUnderline"
LeftX=0
MiddleX=0
RightX=0
LeftY=0
MiddleY=0
RightY=0

[ScreenOptionsMaster]
# mods are defined here
Rotation="3;selectmultiple"
RotationDefault="mod,no dizzy,no twirl, no roll"
Rotation,1="mod,dizzy;name,Dizzy"
Rotation,2="mod,twirl;name,Twirl"
Rotation,3="mod,roll;name,Roll"

Effect4="6;selectmultiple"
Effect4Default="mod,no drunk,no flip,no tornado,no tipsy,no beat,no invert"
Effect4,1="mod,drunk;name,Drunk"
Effect4,2="mod,flip;name,Flip"
Effect4,3="mod,60% tornado;name,Tornado"
Effect4,4="mod,tipsy;name,Tipsy"
Effect4,5="mod,beat;name,Beat"
Effect4,6="mod,invert;name,Invert"

Handicap="5;selectmultiple"
HandicapDefault="mod,no nomines,no noholds,no little,no norolls,no nohands"
Handicap,1="mod,little;name,Little"
Handicap,2="mod,nomines;name,NoMines"
Handicap,3="mod,noholds;name,NoHolds"
Handicap,4="mod,norolls;name,NoRolls"
Handicap,5="mod,nohands;name,NoHands"

Handicap2="4;selectmultiple"
Handicap2Default="mod,no nojumps,no nostretch,no noquads,normal-drain"
Handicap2,1="mod,nojumps;name,NoJumps"
Handicap2,2="mod,nostretch;name,NoStretch"
Handicap2,3="mod,noquads;name,NoQuads"
Handicap2,4="mod,norecover;name,NoRecover"

Insert="7;selectmultiple"
InsertDefault="mod,no wide,no big,no quick,no skippy,no echo,no stomp,no bmrize"
Insert,1="mod,big;name,Big"
Insert,2="mod,quick;name,Quick"
Insert,3="mod,skippy;name,Skippy"
Insert,4="mod,echo;name,Echo"
Insert,5="mod,wide;name,Wide"
Insert,6="mod,stomp;name,Stomp"
Insert,7="mod,bmrize;name,BMRize"

InsertOther="6;selectmultiple"
InsertOtherDefault="mod,no planted,no floored,no twister,no mines,no holdrolls"
InsertOther,1="mod,planted;name,Planted"
InsertOther,2="mod,floored;name,Floored"
InsertOther,3="mod,twister;name,Twister"
InsertOther,4="mod,mines;name,Mines"
InsertOther,5="mod,holdrolls;name,Rolls"
InsertOther,6="mod,25% flip,-25% invert,23% alternate,-23% split,50% reverse,0.04x,-4500% bumpy,50% boost,1000% sudden,-97.75% suddenoffset,noholds,norolls;name,D-Pad"

TimingScale="8"
TimingScaleDefault="mod,100% judgescale"
TimingScale,1="mod,50% judgescale;name,50%"
TimingScale,2="mod,60% judgescale;name,60%"
TimingScale,3="mod,70% judgescale;name,70%"
TimingScale,4="mod,80% judgescale;name,80%"
TimingScale,5="mod,90% judgescale;name,90%"
TimingScale,6="mod,100% judgescale;name,100%"
TimingScale,7="mod,125% judgescale;name,125%"
TimingScale,8="mod,150% judgescale;name,150%"

Rate="13;together"
RateDefault="mod,1.0xmusic;mod,no haste"
Rate,1="mod,0.8xmusic;name,0.8x"
Rate,2="mod,0.9xmusic;name,0.9x"
Rate,3="mod,1.0xmusic;name,1.0x"
Rate,4="mod,1.1xmusic;name,1.1x"
Rate,5="mod,1.2xmusic;name,1.2x"
Rate,6="mod,1.3xmusic;name,1.3x"
Rate,7="mod,1.4xmusic;name,1.4x"
Rate,8="mod,1.5xmusic;name,1.5x"
Rate,9="mod,1.6xmusic;name,1.6x"
Rate,10="mod,1.7xmusic;name,1.7x"
Rate,11="mod,1.8xmusic;name,1.8x"
Rate,12="mod,1.9xmusic;name,1.9x"
Rate,13="mod,2.0xmusic;name,2.0x"

Zoom="11;selectone"
ZoomDefault="mod,no mini"
Zoom,1="mod,175% mini;name,-175"
Zoom,2="mod,150% mini;name,-150"
Zoom,3="mod,125% mini;name,-125"
Zoom,4="mod,mini;name,-100"
Zoom,5="mod,75% mini;name,-75"
Zoom,6="mod,50% mini;name,-50"
Zoom,7="mod,25% mini;name,-25"
Zoom,8="name,0"
Zoom,9="mod,-25% mini;name,+25"
Zoom,10="mod,-50% mini;name,+50"
Zoom,11="mod,-75% mini;name,+75"

Background="3;together"
BackgroundDefault=""
Background,1="mod,no effect;name,Default"
Background,2="mod,staticbg;name,StaticBG"
Background,3="mod,randombg;name,RandomBG"

[ScreenOptionsSimpleService]
LineHighlightP1OnCommand=x,490;zoomto,619.5,31;ztest,true;blend,Blend.Add;diffuseshift;effectcolor1,color("#ffa800");effectcolor2,color("#ffeecc");diffusealpha,0.5
LineHighlightP1ChangeCommand=
LineHighlightP1ChangeToExitCommand=

LineHighlightP2OnCommand=x,490;zoomto,619.5,31;ztest,true;blend,Blend.Add;diffuseshift;effectcolor1,color("#ffa800");effectcolor2,color("#ffeecc");diffusealpha,0.5
LineHighlightP2ChangeCommand=
LineHighlightP2ChangeToExitCommand=

CursorOnCommand=visible,false

################################################################################
# concrete screens

################################################################################
## attract loop
[ScreenAttract]
#xxx
PrevScreen="ScreenTitleMenu"
ForceTimer=true
TimerStealth=true
PlayMusic=true

[ScreenAppearanceOptions]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="1,2,3,4,5,14,15,SB,17,19"

[ScreenCompany]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenIntro"
TimerSeconds=6

[ScreenIntro]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen="ScreenLogo"
TimerSeconds=36.2

[ScreenLogo]
Fallback="ScreenAttract"
NextScreen="ScreenDemonstration"
TimerSeconds=6

[ScreenDemonstration]
NextScreen="ScreenDemonstration2"
SecondsToShow=30
ShowStageDisplay=false

[ScreenDemonstration2]
Fallback="ScreenDemonstration"
NextScreen="ScreenRanking"
AllowStyleTypes="OnePlayerOneSide"
DifficultiesToShow="beginner"
SecondsToShow=41
PlayerType="PlayerTraining"

StepsDisplayP1OnCommand=visible,false
StepsDisplayP2OnCommand=visible,false

LifeP1OnCommand=visible,false
LifeP2OnCommand=visible,false

ScoreP1OnCommand=visible,false
ScoreP2OnCommand=visible,false

[ScreenRanking]
Class="ScreenHighScores"
Fallback="ScreenAttract"
NextScreen="ScreenRanking2"
ShowHeader=true

NoScoreName="-----"

ManualScrolling=false
HighScoresType="HighScoresType_AllSteps"
NumColumns=4
ColumnDifficulty1="Difficulty_Easy"
ColumnDifficulty2="Difficulty_Medium"
ColumnDifficulty3="Difficulty_Hard"
ColumnDifficulty4="Difficulty_Challenge"
ColumnStepsType1="StepsType_Dance_Single"
ColumnStepsType2="StepsType_Dance_Single"
ColumnStepsType3="StepsType_Dance_Single"
ColumnStepsType4="StepsType_Dance_Single"

MaxItemsToShow=50

ScrollerOnCommand=CenterX;y,SCREEN_CENTER_Y+20;scrollthroughallitems
ScrollerItemTransformFunction=function(self,offset,itemIndex,numItems) self:y(65*offset) end
ScrollerItemsToDraw=7
ScrollerSecondsPerItem=0.41

[ScreenRanking2]
Fallback="ScreenRanking"
NextScreen="ScreenRanking3"
HighScoresType="HighScoresType_NonstopCourses"

MaxItemsToShow=15

NumColumns=2
ColumnDifficulty1="Difficulty_Medium"
ColumnDifficulty2="Difficulty_Hard"
ColumnStepsType1="StepsType_Dance_Single"
ColumnStepsType2="StepsType_Dance_Single"

[ScreenRanking3]
Fallback="ScreenRanking2"
NextScreen="ScreenMemoryCard"
HighScoresType="HighScoresType_SurvivalCourses"

NumColumns=1
ColumnDifficulty1="Difficulty_Medium"
ColumnStepsType1="StepsType_Dance_Single"

[ScreenMemoryCard]
Fallback="ScreenAttract"
Class="ScreenAttract"
NextScreen="ScreenOITG"
TimerSeconds=12.25

[ScreenOITG]
Fallback="ScreenAttract"
Class="ScreenAttract"
NextScreen=ScreenCleaning()
TimerSeconds=8

[ScreenNoise]
Fallback="ScreenAttract"
Class="ScreenAttract"
NextScreen="ScreenCompany
TimerSeconds=18000
MemoryCardIcons=0
MemoryCardDisplayP1OnCommand=Hidden,1
MemoryCardDisplayP2OnCommand=Hidden,1
[ScreenNoiseUntimed]
Fallback=ScreenNoise
TimerSeconds=0

################################################################################
## game stuff
[ScreenTitleMenu]
PrevScreen="ScreenCompany"
ShowHeader=false

ShowNumSongs=true
NumSongsX=SCREEN_RIGHT-15
NumSongsY=SCREEN_TOP+40
NumSongsOnCommand=vertalign,bottom;horizalign,right;zoom,0.35;shadowlength,1;playcommand,"Set"
NumSongsOffCommand=

ShowTimingDifficulty=true
TimingDifficultyX=SCREEN_RIGHT-15
TimingDifficultyY=SCREEN_TOP+22.5
TimingDifficultyOnCommand=zoom,0.35
TimingDifficultyOffCommand=
#
ShowLifeDifficulty=true
LifeDifficultyX=SCREEN_RIGHT-15
LifeDifficultyY=SCREEN_TOP+8
LifeDifficultyOnCommand=zoom,0.35
LifeDifficultyOffCommand=

ShowHelp=true
HelpX=SCREEN_CENTER_X
HelpY=SCREEN_BOTTOM-31
HelpOffCommand=
HelpOnCommand=draworder,10;zoom,0.7;shadowlength,0;diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#9A9999");effectperiod,1.5;

ChoiceNames=AvailableTitleOptions()
DefaultChoice="01"
Choice01="applydefaultoptions;name,Dance;text,Dance Mode;screen,ScreenITG3"
Choice02="applydefaultoptions;name,Battle;text,Battle Mode;playmode,rave;screen,ScreenITG3"
Choice03="applydefaultoptions;name,Marathon;text,Marathon Mode;playmode,nonstop;screen,ScreenITG3"
Choice04="applydefaultoptions;name,Survival;text,Survival Mode;playmode,oni;mod,lifetime;screen,ScreenITG3"
Choice05="applydefaultoptions;name,Practice;text,Practice Mode;screen,ScreenPracticeMenu"

Choice07="text,Edit Mode;screen,"..Branch.OptionsEdit()
Choice08="screen,ScreenRecordsMenu;text,Records;"
Choice09="screen,ScreenOptionsService;text,Options"
Choice11="screen,ScreenExit;text,Exit"

ScrollerX=SCREEN_CENTER_X-300
ScrollerY=SCREEN_TOP+80
ScrollerOnCommand=zoom,1.3
ScrollerTransform=function(self,offset,itemIndex,numItems) self:y(30*offset); end

[ScreenTitleJoin]
Fallback="ScreenTitleMenu"
NextScreen="ScreenDemonstration"
TimerSeconds=10
TimerStealth=true
ForceTimer=true

ChoiceNames="1"
Choice1="screen,ScreenWarning"
# codes go here

[ScreenTitleAlt]
Fallback="ScreenTitleJoin"

# this is the interlude screen.
[ScreenITG3]
Class="ScreenSplash"
Fallback="ScreenWithMenuElementsBlank"
NextScreen=Branch.StartGame()
PrevScreen=Branch.TitleScreen()
TimerSeconds=2
ForceTimer=true
TimerStealth=true
AllowStartToSkip=false
PrepareScreen=""

################################################################################
[ScreenWarning]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMasterBlank"
PrevScreen="ScreenTitleMenu"
NextScreen="ScreenSelectPlayMode"
TimerSeconds=8
TimerStealth=true
ForceTimer=true

ChoiceNames="1"
Choice1="screen,ScreenSelectPlayMode"
DefaultChoice="1"

[ScreenSelectProfile]
NextScreen=Branch.StartGame()

################################################################################
[ScreenProfileSave]
NextScreen=Branch.AfterProfileSave()
ShowHeader=false
ShowFooter=false
################################################################################
# xxx: this needs to be flipped; select playmode comes first, then style/numplayers
[ScreenSelectPlayMode]
ShowHelp=true

ChoiceNames="1,2,3,4"
Choice1="playmode,regular;screen,ScreenSelectStyle"
Choice2="playmode,rave;screen,ScreenSelectMusic"
Choice3="playmode,nonstop;screen,ScreenSelectStyle"
Choice4="playmode,oni;screen,ScreenSelectStyle;mod,lifetime"

ShowIcon=true
PerChoiceIconElement=true
UseIconMetrics=false

PerChoiceScrollElement=true
ScrollerX=SCREEN_CENTER_X-60
ScrollerY=SCREEN_CENTER_Y+70
ScrollerOnCommand=%function(self) self:z(-200); self:SetDrawByZPosition(false) end
ScrollerOffCommand=
ScrollerTransform=function(self,offset,itemIndex,numItems) local theta=offset*math.pi*2/numItems; self:y(math.sin(theta)*200); self:z(math.cos(theta)*200); self:x(self:GetZ()/2.8); local focus=scale(self:GetZ(),0,200,-1,1); focus=clamp(focus,0,1); local bright=scale(focus,0,1,0.3,1); self:diffuse(bright,bright,bright,1); local zoomv=scale(focus,0,1,0.0,1); self:zoom(zoomv); end
ScrollerNumItemsToDraw=15
ScrollerSecondsPerItem=0.01
ScrollGainFocusCommand=zoomz,1.1
ScrollLoseFocusCommand=zoomz,1

[ScreenSelectStyle]
ShowHelp=true

ChoiceNames=AvailableStyles()
Choice1="style,single;difficulty,medium;screen,ScreenProfileLoad"
Choice2="style,versus;difficulty,medium;screen,ScreenProfileLoad"
Choice3="style,double;difficulty,medium;screen,ScreenProfileLoad"

ShowIcon=true
PerChoiceIconElement=true
UseIconMetrics=false

PerChoiceScrollElement=true
ScrollerX=SCREEN_CENTER_X-90
ScrollerY=SCREEN_CENTER_Y+80
ScrollerOnCommand=%function(self) self:z(-200); self:SetDrawByZPosition(true) end
ScrollerOffCommand=
ScrollerTransform=function(self,offset,itemIndex,numItems) local theta=offset*math.pi*2/numItems; self:x(math.sin(theta)*200); self:z(math.cos(theta)*200); self:y(self:GetZ()/2.2-20); local focus=scale(self:GetZ(),0,200,-1,1); focus=clamp(focus,0,1); local bright=scale(focus,0,1,0.15,1); self:diffuse(bright,bright,bright,1); local zoomv=scale(focus,0,1,0.7,1.2); self:zoom(zoomv); end
ScrollerSecondsPerItem=0.3
ScrollerNumItemsToDraw=15
ScrollGainFocusCommand=zoomz,1.3
ScrollLoseFocusCommand=zoomz,1.2

[ScreenSelectNumPlayers]
Fallback="ScreenSelectStyle"
ChoiceNames="1,2"
OptionOrderUp="2:1"
OptionOrderDown="1:2"
OptionOrderLeft="2:1"
OptionOrderRight="1:2"
OptionOrderAuto="1:2,2:1"

[ScoreKeeperNormal]
PercentScoreWeightCheckpointHit=0
PercentScoreWeightCheckpointMiss=0

PercentScoreWeightHeld=IsGame("Pump") and 0 or 5
PercentScoreWeightHitMine=-6
PercentScoreWeightLetGo=0
PercentScoreWeightMiss=-12
PercentScoreWeightW1=5
PercentScoreWeightW2=4
PercentScoreWeightW3=2
PercentScoreWeightW4=0
PercentScoreWeightW5=-6

GradeWeightCheckpointHit=0
GradeWeightCheckpointMiss=0

GradeWeightHeld=IsGame("Pump") and 0 or 5
GradeWeightHitMine=-6
GradeWeightLetGo=0
GradeWeightMiss=-12
GradeWeightW1=5
GradeWeightW2=4
GradeWeightW3=2
GradeWeightW4=0
GradeWeightW5=-6

[ScreenProfileLoad]
ShowHeader=false
ShowFooter=false
NextScreen=Branch.AfterSelectStyle()

################################################################################
[ScreenSelectMusic]
WaitForChildrenBeforeTweeningOut=true

TimerX=SCREEN_RIGHT-86
TimerY=SCREEN_TOP+23
TimerOnCommand=draworder,101;zoom,1;skewx,-0.3
TimerOffCommand=

ShowPercentScoreP1=true
PercentScoreP1X=SCREEN_CENTER_X-171
PercentScoreP1Y=SCREEN_CENTER_Y+154
PercentScoreP1OnCommand=horizalign,right;player,PLAYER_1;zoom,0.5;
PercentScoreP1OffCommand=
#
ShowPercentScoreP2=true
PercentScoreP2X=SCREEN_CENTER_X+390
PercentScoreP2Y=SCREEN_CENTER_Y+154
PercentScoreP2OnCommand=horizalign,right;player,PLAYER_2;zoom,0.5;
PercentScoreP2OffCommand=

ShowSongTime=true
SongTimeX=SCREEN_CENTER_X+319.5
SongTimeY=SCREEN_CENTER_Y-25
SongTimeOnCommand=draworder,900;horizalign,left;zoom,0.59;strokecolor,Color("Outline");shadowlength,1
SongTimeOffCommand=
SongTimeResetCommand=diffuse,Color("White");
SongTimeAutogenCommand=diffuse,Color("Green");
SongTimeLongCommand=diffuse,Color("Yellow");diffusebottomedge,Color("Orange");
SongTimeMarathonCommand=diffuse,Color("Orange");diffusebottomedge,Color("Red");

ShowStyleIcon=true

ShowHelp=true
HelpY=SCREEN_BOTTOM-36
HelpText=%GetScreenSelectMusicHelpText()
HelpOnCommand=draworder,200;zoom,0.7;shadowlength,1.5;diffusealpha,0;diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#9A9999");effectperiod,1.5;sleep,1;linear,0.3;diffusealpha,1
HelpSelectMenuOpenedMessageCommand=linear,0.125;zoomx,0
HelpSelectMenuClosedMessageCommand=stoptweening;linear,0.125;zoomx,0.6

UseOptionsList=false
UsePlayerSelectMenu=false
SelectMenuAvailable=DifficultyChangingAvailable() and ModeMenuAvailable()
ModeMenuAvailable=ModeMenuAvailable()
SelectMenuChangesDifficulty=true

ShowPaneDisplayTextP1=true
PaneDisplayTextP1X=SCREEN_CENTER_X-280
PaneDisplayTextP1Y=SCREEN_BOTTOM-103
PaneDisplayTextP1OnCommand=player,PLAYER_1;draworder,106;
PaneDisplayTextP1OffCommand=
PaneDisplayTextP1PlayerJoinedMessageCommand=%function(self,params) if params.Player == PLAYER_1 then self:playcommand("On") end end

ShowPaneDisplayTextP2=true
PaneDisplayTextP2X=SCREEN_CENTER_X+280
PaneDisplayTextP2Y=SCREEN_BOTTOM-103
PaneDisplayTextP2OnCommand=player,PLAYER_2;draworder,106;
PaneDisplayTextP2OffCommand=
PaneDisplayTextP2PlayerJoinedMessageCommand=%function(self,params) if params.Player == PLAYER_2 then self:playcommand("On") end end

MusicWheelX=MusicPosX()
MusicWheelY=MusicPosY()
MusicWheelOnCommand=%MusicOnCommand
MusicWheelOffCommand=

BannerX=SCREEN_CENTER_X+205
BannerY=SCREEN_CENTER_Y-120
BannerOnCommand=draworder,-5;scaletoclipped,450,140;zwrite,true;ztest,true;
BannerOffCommand=

BannerReflectionX=SCREEN_CENTER_X+235
BannerReflectionY=SCREEN_CENTER_Y+26
BannerReflectionOnCommand=visible,false
BannerReflectionOffCommand=accelerate,0.75;addx,SCREEN_WIDTH

ArtistDisplayX=SCREEN_CENTER_X-11
ArtistDisplayY=SCREEN_CENTER_Y-25
ArtistDisplayOnCommand=zoom,0.9;
ArtistDisplayOffCommand=

BPMDisplayX=SCREEN_CENTER_X+222
BPMDisplayY=SCREEN_CENTER_Y-25
BPMDisplayOnCommand=zoom,0.66;
BPMDisplayOffCommand=

ShowStepsDisplayList=not GAMESTATE:IsCourseMode()
StepsDisplayListX=SCREEN_CENTER_X+120
StepsDisplayListY=SCREEN_CENTER_Y+10
StepsDisplayListOnCommand=zoom,0.94
StepsDisplayListOffCommand=
StepsDisplayListShowCommand=
StepsDisplayListHideCommand=

ShowCourseContentsList=GAMESTATE:IsCourseMode()
CourseContentsListX=SCREEN_CENTER_X+114
CourseContentsListY=SCREEN_CENTER_Y+11
CourseContentsListOnCommand=zoom,0.55;addx,SCREEN_WIDTH;decelerate,0.75;addx,-SCREEN_WIDTH
CourseContentsListOffCommand=accelerate,0.75;addx,SCREEN_WIDTH

TriangleX=SCREEN_CENTER_X-9999
TriangleY=SCREEN_CENTER_Y-9999

ShowStepsDisplayP1=GAMESTATE:IsHumanPlayer(PLAYER_1)
StepsDisplayP1X=SCREEN_CENTER_X-90
StepsDisplayP1Y=SCREEN_BOTTOM-93
StepsDisplayP1OnCommand=visible,THEME:GetMetric(Var "LoadingScreen","ShowStepsDisplayP1");draworder,101;zoom,0.8
StepsDisplayP1OffCommand=

ShowStepsDisplayP2=GAMESTATE:IsHumanPlayer(PLAYER_2) and GAMESTATE:IsSideJoined('PlayerNumber_P2',1)
StepsDisplayP2X=SCREEN_CENTER_X+90
StepsDisplayP2Y=SCREEN_BOTTOM-93
StepsDisplayP2OnCommand=visible,THEME:GetMetric(Var "LoadingScreen","ShowStepsDisplayP2");draworder,101;zoom,0.8
StepsDisplayP2OffCommand=

SongOptionsX=SCREEN_CENTER_X
SongOptionsY=SCREEN_BOTTOM-32
SongOptionsOnCommand=visible,false;zoom,0.5;shadowlength,2;diffuse,1,1,1,0;linear,0.5;diffuse,1,1,1,1
SongOptionsOffCommand=linear,0.5;diffuse,1,1,1,0

[MusicWheel]
NumWheelItems=15
ShowRandom=true
ShowPortal=true
ShowRoulette=false

CirclePercent=0.42
Wheel3DRadius=200
ItemSpacingY=32

ItemTransformFunction=music_wheel_transform

HighlightOnCommand=%HighlightOnCommand

ScrollBarHeight=300
ScrollBarOnCommand=visible,false

RandomColor=color("#808080")
PortalColor=color("#808080")

ModeMenuChoiceNames="Group,Title,Bpm,Length,Popularity,TopGrades,Artist,EasyMeter,MediumMeter,HardMeter,ChallengeMeter,Dance,Battle"

ChoiceDance="playmode,regular"
ChoiceBattle="playmode,battle"

[MusicWheelItem]
SongNameX=110
SongNameY=0
SongNameOnCommand=zoomx,0.9

WheelNotifyIconX=0
WheelNotifyIconOnCommand=

SectionExpandedX=-22
SectionExpandedY=0
SectionExpandedOnCommand=shadowlength,2.5;zoom,.6;shadowlength,2;maxwidth,350

SectionCollapsedX=-22
SectionCollapsedY=0
SectionCollapsedOnCommand=shadowlength,2.5;zoom,.6;shadowlength,2;maxwidth,350

SectionCountX=97
SectionCountY=0
#SectionCountOnCommand=shadowlength,2.5;zoom,.4;halign,1;shadowlength,2;diffuse,color("#00FFFF");
SectionCountOnCommand=zoom,0

CourseX=96
CourseY=0
CourseOnCommand=zoom,.6;halign,1;shadowlength,2;maxwidth,350

RandomX=-22
RandomOnCommand=zoom,.6;shadowlength,1;

PortalX=-22
PortalOnCommand=zoom,.6;shadowlength,1;

SortX=96
SortY=0
SortOnCommand=shadowlength,2.5;zoom,.6;halign,1;shadowlength,2;maxwidth,SCREEN_WIDTH/1.85

ModeX=96
ModeY=0
ModeOnCommand=shadowlength,2.5;zoom,.6;halign,1;shadowlength,2;maxwidth,SCREEN_WIDTH/1.85

GradeP1X=-175
GradeP1Y=-7
GradeP1SetCommand=%GradeSetCommand

GradeP2X=-175
GradeP2Y=7
GradeP2OnCommand=%GradeSetCommand

[TextBanner]
TitleX=104
TitleOnCommand=zoom,.5;shadowlength,2;halign,1;valign,0.5;maxwidth,SCREEN_WIDTH/1.45
SubtitleX=104
SubtitleOnCommand=zoom,0.35;shadowlength,2;halign,1;valign,0.5

[CourseTextBanner]
Fallback="TextBanner"
TitleOnCommand=x,-130;shadowlength,0;horizalign,left;maxwidth,410;
SubtitleOnCommand=x,-130;y,12;zoom,0.5;shadowlength,0;horizalign,left
ArtistOnCommand=visible,false
AfterSetCommand=%CourseTextBannerAfterSet

[FadingBanner]
BannerFadeFromCachedCommand=diffusealpha,1;stoptweening;accelerate,0.05;glow,Color.Alpha( Color("White"), 0.45 );decelerate,0.075;diffusealpha,0;glow,Color("Invisible");
BannerOnCommand=
BannerFadeFromCachedCommand=diffusealpha,1;stoptweening;linear,0.1;glow,Color.Alpha(Color("White"),0.25);decelerate,0.15;glow,Color.Invisible;diffusealpha,0
BannerFadeOffCommand=diffusealpha,1;stoptweening;linear,0.1;diffusealpha,0
BannerResetFadeCommand=diffusealpha,1

BannerRouletteCommand=
BannerRandomCommand=

[BPMDisplay]
Cycle=false
NoBpmText="000"
RandomText="???"
VariousText="Various"

SetNoBpmCommand=stoptweening;stopeffect;diffuse,color("#FFFFFFFF");maxwidth,120
SetNormalCommand=stoptweening;stopeffect;diffuse,color("#FFFFFFFF");maxwidth,120
SetChangeCommand=stoptweening;stopeffect;diffuse,color("#d8f6ffFF");maxwidth,120
SetRandomCommand=stoptweening;stopeffect;diffuse,color("#FFFFFFFF");maxwidth,120
SetExtraCommand=stoptweening;stopeffect;diffuse,color("#FFFFFFFF");maxwidth,120

[StepsDisplay]
CapitalizeDifficultyNames=true
ZeroMeterString=""

ShowMeter=false
MeterX=0
MeterY=-13
MeterOnCommand=zoom,1
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
		self:diffusetopedge(ContrastingDifficultyColor(param.CustomDifficulty)) \
	end \
end

ShowTicks=false
ShowDescription=false

DescriptionX=0
DescriptionY=30
DescriptionOnCommand=zoom,1;shadowlength,2;maxwidth,112
DescriptionSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
		self:uppercase( param.CustomDifficulty ~= "EDIT" ) \
		self:uppercase( param.CustomDifficulty ~= "MEDIUM" ) \
	end \
	if param.Steps and param.Steps:IsAnEdit() and param.Steps:GetDescription() == "" then \
		self:settext("Untitled") \
	end \
end

[StepsDisplayList]
ItemsSpacingY=22
NumShownItems=5
CapitalizeDifficultyNames=true
MoveCommand=finishtweening;linear,.3

[StepsDisplayListRow]
CapitalizeDifficultyNames=true

ShowDescription=true
DescriptionX=-65
DescriptionY=0
DescriptionOnCommand=halign,1;zoom,.5;shadowlength,2;maxwidth,112
DescriptionSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
		self:uppercase( param.CustomDifficulty ~= "Edit" ) \
	end \
	if param.Steps and param.Steps:IsAnEdit() and param.Steps:GetDescription() == "" then \
		self:settext("Untitled") \
	end \
end

ShowTicks=true
NumTicks=(IsNetConnected() and 10 or 20)
MaxTicks=(IsNetConnected() and 10 or 20)
TicksX=10
TicksY=1
TicksOnCommand=halign,0;shadowlength,1;
TicksSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
	end \
end

ShowMeter=true
MeterX=-10
MeterY=0
MeterOnCommand=zoom,.5;shadowlength,2
MeterSetCommand=%function(self,param) if param.CustomDifficulty then self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) end end

#===============================#
[ScreenSelectCourse]
Fallback="ScreenSelectMusic"
ShowStageDisplay=false

################################################################################
[ScreenPlayerOptions]
NextScreen="ScreenStageInformation"
ShowStyleIcon=true
ShowStageDisplay=false
ShowHelp=true
TimerY=SCREEN_TOP+23

LineNames=SongMods()
Line1="lua,ArbitrarySpeedMods()"
Line2="list,Persp"
Line3="list,NoteSkins"
Line4="list,Scroll"
Line5="list,Accel"
Line7="list,Zoom"
Line9="list,Appearance"
Line10="list,Handicap"
Line11="list,Handicap2"
Line12="list,Turn"
Line13="list,Insert"
Line14="list,InsertOther"
Line15="list,Hide"
Line16="list,Steps"
Line17="list,Rotation"
Line18="list,Effect4"
Line19="lua,OptionTournamentOptions()"
Line22="lua,OptionOrientation()"
Line23="lua,OptionPlayfield()"
Line24="list,Rate"
Line25="lua,OptionRowScreenFilter()"

LineBG="list,Background"

LineSL="lua,ThemePrefRow('SurroundLife')"
LineGH="lua,ThemePrefRow('GameplayHandicap')"

[ScreenPlayerOptionsRestricted]
LineNames="1,2,3,4,5"
# speed, persp, noteskins, scroll, steps
Line5="list,StepsLocked"

################################################################################
[ScreenStageInformation]
TimerSeconds=3
TimerStealth=true
ShowHeader=false
ShowFooter=false
################################################################################

[ScreenNetSelectMusic]
Class="ScreenNetSelectMusic"
Fallback="ScreenNetSelectBase"
PrevScreen="ScreenNetRoom"
NextScreen="ScreenStageInformation"
NoSongsScreen=Branch.TitleMenu()
RoomSelectScreen="ScreenNetRoom"
PlayerOptionsScreen="ScreenPlayerOptions"

ModIconsP1X=SCREEN_CENTER_X+290
ModIconsP1Y=SCREEN_BOTTOM-140
ModIconsP1OnCommand=zoomy,0.9
ModIconsP1OffCommand=linear,0.5;zoomy,0

ModIconsP2X=SCREEN_CENTER_X-180
ModIconsP2Y=SCREEN_BOTTOM-105
ModIconsP2OnCommand=zoomy,0.9
ModIconsP2OffCommand=linear,0.5;zoomy,0

MusicWheelType="RoomWheel"
MusicWheelX=SCREEN_CENTER_X-225
MusicWheelY=SCREEN_CENTER_Y
MusicWheelOnCommand=draworder,-5;fov,90;
MusicWheelOffCommand=smooth,0.4;zoomy,0;

UsersDX=40
UsersAY=16

UsersX=SCREEN_CENTER_X-25
UsersY=SCREEN_CENTER_Y+165

UsersOnCommand=draworder,100;zoom,0.4;shadowlength,1
UsersOffCommand=linear,0.5;zoom,0

UserSpacingX=50
UserLine2Y=16
UserLine3Y=32

WaitForChildrenBeforeTweeningOut=true

TimerX=SCREEN_RIGHT-86
TimerY=SCREEN_TOP+23
TimerOnCommand=draworder,101;zoom,1;skewx,-0.3
TimerOffCommand=

ShowPercentScoreP1=true
PercentScoreP1X=SCREEN_CENTER_X+370
PercentScoreP1Y=SCREEN_CENTER_Y+160
PercentScoreP1OnCommand=horizalign,right;player,PLAYER_1;zoom,0.5;
PercentScoreP1OffCommand=
#
ShowPercentScoreP2=true
PercentScoreP2X=SCREEN_CENTER_X+370
PercentScoreP2Y=SCREEN_CENTER_Y+160
PercentScoreP2OnCommand=horizalign,right;player,PLAYER_2;zoom,0.5;
PercentScoreP2OffCommand=

ShowSongTime=true
SongTimeX=SCREEN_CENTER_X+342
SongTimeY=SCREEN_CENTER_Y-42
SongTimeOnCommand=draworder,900;horizalign,left;zoom,0.59;strokecolor,Color("Outline");shadowlength,1
SongTimeOffCommand=
SongTimeResetCommand=diffuse,Color("White");
SongTimeAutogenCommand=diffuse,Color("Green");
SongTimeLongCommand=diffuse,Color("Yellow");diffusebottomedge,Color("Orange");
SongTimeMarathonCommand=diffuse,Color("Orange");diffusebottomedge,Color("Red");

ShowStyleIcon=true

ShowHelp=true
HelpY=SCREEN_BOTTOM-31
HelpText=%GetScreenSelectMusicHelpText()
HelpOnCommand=draworder,200;zoom,0.7;shadowlength,1.5;diffusealpha,0;diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#9A9999");effectperiod,1.5;sleep,1;linear,0.3;diffusealpha,1
HelpSelectMenuOpenedMessageCommand=linear,0.125;zoomx,0
HelpSelectMenuClosedMessageCommand=stoptweening;linear,0.125;zoomx,0.6

UseOptionsList=false
UsePlayerSelectMenu=false
SelectMenuAvailable=DifficultyChangingAvailable() and ModeMenuAvailable()
ModeMenuAvailable=ModeMenuAvailable()
SelectMenuChangesDifficulty=true

ShowPaneDisplayTextP1=true
PaneDisplayTextP1X=SCREEN_CENTER_X+260
PaneDisplayTextP1Y=SCREEN_BOTTOM-98
PaneDisplayTextP1OnCommand=player,PLAYER_1;draworder,106;
PaneDisplayTextP1OffCommand=
PaneDisplayTextP1PlayerJoinedMessageCommand=%function(self,params) if params.Player == PLAYER_1 then self:playcommand("On") end end

ShowPaneDisplayTextP2=true
PaneDisplayTextP2X=SCREEN_CENTER_X+260
PaneDisplayTextP2Y=SCREEN_BOTTOM-98
PaneDisplayTextP2OnCommand=player,PLAYER_2;draworder,106;
PaneDisplayTextP2OffCommand=
PaneDisplayTextP2PlayerJoinedMessageCommand=%function(self,params) if params.Player == PLAYER_2 then self:playcommand("On") end end

BannerReflectionX=SCREEN_CENTER_X+235
BannerReflectionY=SCREEN_CENTER_Y+26
BannerReflectionOnCommand=visible,false
BannerReflectionOffCommand=accelerate,0.75;addx,SCREEN_WIDTH

ArtistDisplayX=SCREEN_CENTER_X+200
ArtistDisplayY=SCREEN_CENTER_Y-68
ArtistDisplayOnCommand=zoom,0.9;
ArtistDisplayOffCommand=

ShowBPMDisplay=true
BPMDisplayX=SCREEN_CENTER_X+200
BPMDisplayY=SCREEN_CENTER_Y-42
BPMDisplayOnCommand=zoom,0.9;
BPMDisplayOffCommand=

ShowStepsDisplayList=not GAMESTATE:IsCourseMode()
StepsDisplayListX=SCREEN_CENTER_X+263
StepsDisplayListY=SCREEN_CENTER_Y-17
StepsDisplayListOnCommand=draworder,500;zoom,0.94
StepsDisplayListOffCommand=
StepsDisplayListShowCommand=
StepsDisplayListHideCommand=

ShowCourseContentsList=false

TriangleX=SCREEN_CENTER_X-9999
TriangleY=SCREEN_CENTER_Y-9999

ShowStepsDisplayP1=GAMESTATE:IsHumanPlayer(PLAYER_1)
StepsDisplayP1X=SCREEN_CENTER_X-90
StepsDisplayP1Y=SCREEN_BOTTOM-93
StepsDisplayP1OnCommand=visible,THEME:GetMetric(Var "LoadingScreen","ShowStepsDisplayP1");draworder,101;zoom,0.8
StepsDisplayP1OffCommand=

ShowStepsDisplayP2=GAMESTATE:IsHumanPlayer(PLAYER_2) and GAMESTATE:IsSideJoined('PlayerNumber_P2',1)
StepsDisplayP2X=SCREEN_CENTER_X+90
StepsDisplayP2Y=SCREEN_BOTTOM-93
StepsDisplayP2OnCommand=visible,THEME:GetMetric(Var "LoadingScreen","ShowStepsDisplayP2");draworder,101;zoom,0.8
StepsDisplayP2OffCommand=

SongOptionsX=SCREEN_CENTER_X
SongOptionsY=SCREEN_BOTTOM-32
SongOptionsOnCommand=visible,false;zoom,0.5;shadowlength,2;diffuse,1,1,1,0;linear,0.5;diffuse,1,1,1,1
SongOptionsOffCommand=linear,0.5;diffuse,1,1,1,0

[ScreenNetRoom]
Class="ScreenNetRoom"
Fallback="ScreenNetSelectBase"
PrevScreen=Branch.TitleMenu()
# XXX
NextScreen="ScreenGameplayBranch"
MusicSelectScreen="ScreenNetSelectMusic"

ShowBannerFrame=true
BannerFrameX=SCREEN_CENTER_X-200
BannerFrameY=SCREEN_TOP+160-36+4
BannerFrameOnCommand=draworder,-5;addy,-SCREEN_CENTER_Y;decelerate,0.35;addy,SCREEN_CENTER_Y
BannerFrameOffCommand=bouncebegin,0.15;zoomx,0;

RoomWheelX=SCREEN_CENTER_X-225
RoomWheelY=SCREEN_CENTER_Y
RoomWheelOnCommand=draworder,-5;fov,90;
RoomWheelOffCommand=smooth,0.4;zoomy,0;

OpenRoomColor=color("1.0,1.0,1.0,1.0")
PasswdRoomColor=color("1.0,0.5,0.5,1.0")
InGameRoomColor=color("1.0,0.1,0.1,1.0")

[ScreenNetSelectBase]
Class="ScreenNetSelectBase"
Fallback="ScreenWithMenuElements"

ShowHeader=true
HeaderX=SCREEN_CENTER_X
HeaderY=SCREEN_TOP
HeaderOnCommand=draworder,-1;zoomy,0.6;diffuse,color("#808080");maxwidth,300
HeaderOffCommand=

# Box Input Chat
ChatInputBoxX=SCREEN_CENTER_X-225
ChatInputBoxY=SCREEN_CENTER_Y+180
ChatInputBoxOnCommand=bounceend,0.5;diffusealpha,1;
ChatInputBoxOffCommand=bouncebegin,0.5;zoomy,0
ChatInputBoxWidth=SCREEN_CENTER_X*0.9
ChatInputBoxHeight=62

# Text Input Chat
ChatInputX=SCREEN_CENTER_X-89
ChatInputY=SCREEN_CENTER_Y+80
ChatTextInputWidth=SCREEN_CENTER_X*1.48
ChatInputOnCommand=halign,0;valign,0;zoom,0.35;diffusealpha,0;linear,0.55;diffusealpha,1
ChatInputOffCommand=diffusealpha,1;linear,0.35;diffusealpha,0

# Box Output Chat
ChatOutputBoxX=SCREEN_CENTER_X-225
ChatOutputBoxY=SCREEN_CENTER_Y+67
ChatOutputBoxOnCommand=bounceend,0.5;diffusealpha,1;draworder,-300
ChatOutputBoxOffCommand=
ChatOutputBoxWidth=SCREEN_CENTER_X*0.9
ChatOutputBoxHeight=150

# Text Output Chat
ChatOutputX=SCREEN_CENTER_X-89
ChatOutputY=SCREEN_CENTER_Y+65
ChatTextOutputWidth=SCREEN_CENTER_X*1.48
ChatOutputLines=24
ChatOutputOnCommand=halign,0;valign,1;zoom,0.35;diffusealpha,0;linear,0.55;diffusealpha,1
ChatOutputOffCommand=diffusealpha,1;linear,0.35;diffusealpha,0

# Users Settings
UsersX=SCREEN_CENTER_X-25
UsersY=SCREEN_CENTER_Y+165

UsersOnCommand=draworder,100;zoom,0.4;shadowlength,1
UsersOffCommand=linear,0.5;zoom,0

UserSpacingX=50
UserLine2Y=16
UserLine3Y=32

Users0Command=draworder,2;diffuse,color("1.0,0.4,0.4,1.0")
Users1Command=draworder,2;diffuse,color("1.0,1.0,1.0,1.0")
Users2Command=draworder,2;diffuse,color("0.5,0.5,1.0,1.0")
Users3Command=draworder,2;diffuse,color("0.5,1.0,0.5,1.0")
Users4Command=draworder,2;diffuse,color("1.0,0.5,0.5,1.0")

[RoomInfoDisplay]
#RoomInfoDisplayOnCommand=x,SCREEN_CENTER_X-330;y,SCREEN_CENTER_Y+105;zoom,0.7
RoomInfoDisplayOnCommand=visible,false
#RoomInfoDisplayOffCommand=x,SCREEN_CENTER_X-330;y,SCREEN_CENTER_Y+105;zoom,0.7
RoomInfoDisplayOffCommand=visible,false

DeployDelay=0.1
RetractDelay=0.1

RoomTitleOnCommand=x,-120;y,-140;zoom,0.75
RoomDescOnCommand=x,-120;y,-129;zoom,0.75

LastRoundOnCommand=x,-120;y,-107;zoom,0.75
SongTitleOnCommand=x,-110;y,-96;zoom,0.75
SongSubTitleOnCommand=x,-110;y,-85;zoom,0.75
SongArtistOnCommand=x,-110;y,-74;zoom,0.75

PlayersOnCommand=x,-120;y,-52;zoom,0.75

PlayerListElementX=-110
PlayerListElementY=-41
PlayerListElementOffsetX=0
PlayerListElementOffsetY=11
PlayerListElementOnCommand=zoom,0.75

[RoomWheel]
Fallback="MusicWheel"

NumWheelItems=13

ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:x( (1-math.cos(offsetFromCenter/math.pi))*0 ); self:y( offsetFromCenter*30 ); end

MusicWheelSortOnCommand=fov,90;
MusicWheelSortOffCommand=fov,90;
MusicWheelItemSortOnCommand=zoomy,0;bounceend,0.15;zoomy,1
MusicWheelItemSortOffCommand=linear,0.175;zoomy,0

HighlightOnCommand=x,-7;blend,Blend.Add;diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#FFFFFF");effectoffset,0;effectclock,'beat';zoomx,1

HighlightSortOnCommand=stoptweening;decelerate,0.125;glow,Color("Stealth");zoom,1
HighlightSortOffCommand=stoptweening;accelerate,0.125;glow,Color("Orange");zoom,1.05

WheelItemOnDelayOffset=0.00
WheelItemOffDelayOffset=0.00

RoomWheelItemStartOnCommand=
RoomWheelItemFinishOnCommand=
CreateRoomColor=color("0.0,0.9,0.25,1.0")
ScrollBarOnCommand=visible,false

[RoomWheelItem]
TextX=-25
TextY=-5
TextOnCommand=maxwidth,350;zoom,0.6

DescriptionX=-25
DescriptionY=5
DescriptionOnCommand=horizalign,center;maxwidth,350;zoomy,0.5;zoomx,0.45

[ScreenGameplay]
ShowHeader=false
ShowFooter=false

LifeP1X=LifePosXP1()
LifeP1Y=LifePosYP1()
LifeP1OnCommand=%SurroundLifeP1
LifeP1OffCommand=accelerate,0.4;addx,-100

LifeP2X=LifePosXP2()
LifeP2Y=LifePosYP2()
LifeP2OnCommand=%SurroundLifeP2
LifeP2OffCommand=accelerate,0.4;addx,100

ScoreP1X=SCREEN_CENTER_X-190
ScoreP1Y=SCREEN_TOP+55
ScoreP1OnCommand=diffuse,PlayerColor(PLAYER_1);addy,-100;sleep,0.5;decelerate,0.8;addy,100;zoomx,0.65;zoomy,0.55
ScoreP1OffCommand=accelerate,0.8;addy,-100

ScoreP2X=SCREEN_CENTER_X+190
ScoreP2Y=SCREEN_TOP+55
ScoreP2OnCommand=diffuse,PlayerColor(PLAYER_2);addy,-100;sleep,0.5;decelerate,0.8;addy,100;zoomx,0.65;zoomy,0.55
ScoreP2OffCommand=accelerate,0.8;addy,-100

StepsDisplayP1X=SCREEN_CENTER_X-290
StepsDisplayP1Y=SCREEN_TOP+23
StepsDisplayP1OnCommand=draworder,100;addx,-SCREEN_WIDTH/3;sleep,2;decelerate,0.5;addx,SCREEN_WIDTH/3;
StepsDisplayP1OffCommand=accelerate,0.8;addx,-SCREEN_WIDTH/3

StepsDisplayP2X=SCREEN_CENTER_X+290
StepsDisplayP2Y=SCREEN_TOP+23
StepsDisplayP2OnCommand=draworder,100;addx,SCREEN_WIDTH/3;sleep,2;decelerate,0.5;addx,-SCREEN_WIDTH/3;
StepsDisplayP2OffCommand=accelerate,0.8;addx,SCREEN_WIDTH/3

ShowStageDisplay=true
StageDisplayX=SCREEN_CENTER_X
StageDisplayY=SCREEN_CENTER_Y
StageDisplayOnCommand=draworder,105;zoom,0.8;sleep,1.2;linear,0.3;zoom,0.25;y,SCREEN_BOTTOM-38
StageDisplayOffCommand=accelerate,0.8;addy,150

SecondaryScoreP1X=SCREEN_CENTER_X-14
SecondaryScoreP1Y=SCREEN_CENTER_Y+32
SecondaryScoreP2X=SCREEN_CENTER_X+14
SecondaryScoreP2Y=SCREEN_CENTER_Y+32

CombinedLifeX=SCREEN_CENTER_X
CombinedLifeY=SCREEN_TOP+65
CombinedLifeOnCommand=addy,-100;sleep,0.5;decelerate,0.8;addy,+100
CombinedLifeOffCommand=accelerate,0.8;addy,-100

[CombinedLifeMeterTug]
# We don't use it.
MeterWidth=415-8
MeterHeight=5

[Player]
ReceptorArrowsYStandard=-125
ReceptorArrowsYReverse=145

HoldJudgmentYStandard=-90

[PlayerTraining]
Fallback="Player"
ComboOnCommand=visible,false

[HoldJudgment]
# todo: rotation
HoldJudgmentLetGoCommand=diffuse,color("1,1,1,1");zoom,1.25;linear,0.3;zoomx,1;zoomy,1;sleep,0.5;accelerate,0.1;diffuse,color("1,1,1,0");zoomx,2;zoomy,0
HoldJudgmentHeldCommand=diffuse,color("1,1,1,1");zoom,1.25;linear,0.3;zoomx,1;zoomy,1;sleep,0.5;accelerate,0.1;diffuse,color("1,1,1,0");zoomx,2;zoomy,0

[Protiming]
ProtimingOnCommand=shadowlength,1;horizalign,right;x,30;strokecolor,Color("Outline");skewx,-0.125;textglowmode,"TextGlowMode_Inner";
AverageOnCommand=shadowlength,1;horizalign,left;x,32;y,8;zoom,0.75;diffuse,ColorLightTone( Color("Green") );strokecolor,Color("Outline");skewx,-0.125;textglowmode,"TextGlowMode_Inner";
TextOnCommand=shadowlength,1;horizalign,left;x,32;y,-6;zoom,0.5;strokecolor,Color("Outline");skewx,-0.125;textglowmode,"TextGlowMode_Inner";
#
ProtimingW1Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W1"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingW2Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W2"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingW3Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W3"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingW4Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W4"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingW5Command=finishtweening;diffuse,Color("White");zoom,1.15;glow,Color("White");linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_W5"];sleep,2;linear,0.5;diffuse,Color("Invisible");
ProtimingMissCommand=finishtweening;diffusealpha,1;zoom,1.15;glow,GameColor.Judgment["JudgmentLine_Miss"];linear,0.05;zoom,1;glow,Color("Invisible");diffuse,GameColor.Judgment["JudgmentLine_Miss"];sleep,2;linear,0.5;diffuse,Color("Invisible");
#
AveragePulseCommand=finishtweening;diffusealpha,1;zoom,0.75*1.025;decelerate,0.05;zoom,0.75;sleep,2;linear,0.5;diffusealpha,0;
TextPulseCommand=finishtweening;diffusealpha,1;zoom,0.5*1.025;decelerate,0.05;zoom,0.5;sleep,2;linear,0.5;diffusealpha,0;

[StepsDisplayGameplay]
Fallback="StepsDisplay"

DescriptionX=-15
DescriptionY=0

Frame=zoom,5

ShowDescription=true
DescriptionOnCommand=zoom,0.5;shadowlength,2;
DescriptionSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(ContrastingDifficultyColor(param.CustomDifficulty));\
	end \
end;

ShowMeter=true
MeterX=30
MeterY=0
MeterOnCommand=zoom,0.5;shadowlength,2;
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(ContrastingDifficultyColor(param.CustomDifficulty));\
	end \
end;

[StepsDisplayGameplay P1]
Fallback="StepsDisplayGameplay"
DescriptionX=-14
MeterX=30

[StepsDisplayGameplay P2]
Fallback="StepsDisplayGameplay"
DescriptionX=14
MeterX=-30

[LifeMeterBar]
InitialValue=GameplayHandicap()
DangerThreshold=0.3

[StreamDisplay]
NumPills=1
TextureCoordScaleX=1
PillTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
	local native_width=272; \
	local zoomed_width=18; \
	self:zoomtowidth(native_width); \
	self:x(itemIndex*zoomed_width); \
	self:zoomy(0.6); \
end

[Judgment]
JudgmentW1Command=diffusealpha,1;zoomx,1.3;zoomy,1.7;glowshift;effectperiod,0.05;effectcolor1,color("1,1,1,0");effectcolor2,color("1,1,1,0.5");decelerate,0.1;zoom,1;sleep,.4;accelerate,0.1;diffusealpha,0;zoomx,1.5;zoomy,0
JudgmentW2Command=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,.4;accelerate,0.1;diffusealpha,0;zoomx,1.5;zoomy,0
JudgmentW3Command=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,.4;accelerate,0.1;diffusealpha,0;zoomx,1.5;zoomy,0
JudgmentW4Command=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,.4;accelerate,0.1;zoom,0
JudgmentW5Command=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,.4;accelerate,0.1;zoom,0
JudgmentMissCommand=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,.4;accelerate,0.1;zoom,0

[Combo]
ShowComboAt=4

NumberMinZoom=0.9
NumberMaxZoom=1.4
NumberMaxZoomAt=500
NumberOnCommand=y,20;shadowlength,0;horizalign,center;vertalign,bottom

LabelOnCommand=y,14;shadowlength,0;horizalign,center;vertalign,top

FullComboW1Command=diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#94EBFE");effectperiod,0.5
FullComboW2Command=diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#FDD599");effectperiod,0.5
FullComboW3Command=diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#4dfc8f");effectperiod,0.5
FullComboBrokenCommand=stopeffect
MissComboCommand=stopeffect;diffuseshift;effectcolor1,color("#FF2020");effectcolor2,color("#FF2020");effectperiod,0.5

[ScoreDisplayRave]
MeterP1Y=1
MeterP1OnCommand=rotationz,-90;glowshift;effectcolor2,color("1,1,1,0.5")
MeterP2Y=1
MeterP2OnCommand=rotationz,-90;glowshift;effectcolor2,color("1,1,1,0.5")

LevelP1Y=-140
LevelP1X=1
LevelP1OnCommand=diffuse,PlayerColor(PLAYER_1);zoom,0.5

LevelP2Y=-140
LevelP2X=1
LevelP2OnCommand=diffuse,PlayerColor(PLAYER_1);zoom,0.5

################################################################################
[ScreenEvaluation]
ShowHeader=true
ShowStyleIcon=true
ShowStageDisplay=false

TimerOnCommand=draworder,101;skewx,-0.3;zoom,0;sleep,3;decelerate,0.5;zoom,1

ShowHelp=false
HelpY=SCREEN_CENTER_Y+205
HelpOnCommand=draworder,200;zoom,0.4;shadowlength,1.5;diffusealpha,0;diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#9A9999");effectperiod,1.5;sleep,1;linear,0.3;diffusealpha,1

BannerWidth=176
BannerHeight=70

LargeBannerX=SCREEN_CENTER_X
LargeBannerY=SCREEN_CENTER_Y-136
LargeBannerOffCommand=stoptweening;linear,0.2;diffusealpha,0
LargeBannerOnCommand=ztest,true;cropright,1.3;faderight,0.1;sleep,3;linear,0.7;cropright,-0.3;scaletoclipped,292,75

LargeBannerFrameX=SCREEN_CENTER_X
LargeBannerFrameY=SCREEN_CENTER_Y-136
LargeBannerFrameOnCommand=zoomx,0.95;zoomy,0.7;diffusealpha,0;sleep,3;linear,0.5;diffusealpha,1;zoomx,0.95;zoomy,0.7
LargeBannerFrameOffCommand=stoptweening;linear,0.2;diffusealpha,0

ShowGradeArea=true
GradeFrameP1X=SCREEN_CENTER_X-145
GradeFrameP1Y=SCREEN_CENTER_Y+54
GradeFrameP1OffCommand=
GradeFrameP1OnCommand=draworder,3
#--#
GradeFrameP2X=SCREEN_CENTER_X+145
GradeFrameP2Y=SCREEN_CENTER_Y+54
GradeFrameP2OffCommand=
GradeFrameP2OnCommand=draworder,3
#----#
GradeP1X=SCREEN_CENTER_X-200+EvalX()
GradeP1Y=SCREEN_CENTER_Y-20
GradeP1OffCommand=accelerate,0.3;addx,-EvalTweenDistance()
GradeP1OnCommand=draworder,101;zoom,0;diffusealpha,0;sleep,.5;bounceend,.4;zoom,2.8;diffusealpha,1;sleep,2;decelerate,0.5;zoom,0.9;x,SCREEN_CENTER_X-353+EvalX();y,SCREEN_CENTER_Y-48

GradeP2X=SCREEN_CENTER_X+200+EvalX()
GradeP2Y=SCREEN_CENTER_Y-20
GradeP2OffCommand=accelerate,0.3;addx,EvalTweenDistance()
GradeP2OnCommand=draworder,101;zoom,0;diffusealpha,0;sleep,.5;bounceend,.4;zoom,2.8;diffusealpha,1;sleep,2;decelerate,0.5;zoom,0.9;x,SCREEN_CENTER_X+58+EvalX();y,SCREEN_CENTER_Y-48

ShowJudgmentLineW1=true
ShowJudgmentLineW2=true
ShowJudgmentLineW3=true
ShowJudgmentLineW4=true
ShowJudgmentLineW5=true
ShowJudgmentLineMiss=true
ShowJudgmentLineMaxCombo=true

W1NumberP1X=SCREEN_CENTER_X-217
W1NumberP1Y=SCREEN_CENTER_Y+77
W1NumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W1NumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
W1NumberP2X=SCREEN_CENTER_X+192
W1NumberP2Y=SCREEN_CENTER_Y+77
W1NumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W1NumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0

W2NumberP1X=SCREEN_CENTER_X-217
W2NumberP1Y=SCREEN_CENTER_Y+77+16
W2NumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W2NumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
W2NumberP2X=SCREEN_CENTER_X+192
W2NumberP2Y=SCREEN_CENTER_Y+77+16
W2NumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W2NumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0

W3NumberP1X=SCREEN_CENTER_X-217
W3NumberP1Y=SCREEN_CENTER_Y+77+16*2
W3NumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W3NumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
W3NumberP2X=SCREEN_CENTER_X+192
W3NumberP2Y=SCREEN_CENTER_Y+77+16*2
W3NumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W3NumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0

W4NumberP1X=SCREEN_CENTER_X-217
W4NumberP1Y=SCREEN_CENTER_Y+77+16*3
W4NumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W4NumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
W4NumberP2X=SCREEN_CENTER_X+192
W4NumberP2Y=SCREEN_CENTER_Y+77+16*3
W4NumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W4NumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0

W5NumberP1X=SCREEN_CENTER_X-217
W5NumberP1Y=SCREEN_CENTER_Y+77+16*4
W5NumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W5NumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
W5NumberP2X=SCREEN_CENTER_X+192
W5NumberP2Y=SCREEN_CENTER_Y+77+16*4
W5NumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
W5NumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0

MissNumberP1X=SCREEN_CENTER_X-217
MissNumberP1Y=SCREEN_CENTER_Y+77+16*5
MissNumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
MissNumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
MissNumberP2X=SCREEN_CENTER_X+192
MissNumberP2Y=SCREEN_CENTER_Y+77+16*5
MissNumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
MissNumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0

MaxComboNumberP1X=SCREEN_CENTER_X-30
MaxComboNumberP1Y=SCREEN_CENTER_Y+77+16*5
MaxComboNumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
MaxComboNumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
MaxComboNumberP2X=SCREEN_CENTER_X+381
MaxComboNumberP2Y=SCREEN_CENTER_Y+77+16*5
MaxComboNumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
MaxComboNumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0

ShowDetailArea=true
DetailFrameP1X=
DetailFrameP1Y=
DetailFrameP1OnCommand=
DetailFrameP2X=
DetailFrameP2Y=
DetailFrameP2OnCommand=
#----#
NumStepsNumberP1X=
NumStepsNumberP1Y=
NumStepsNumberP1OnCommand=visible,false
NumStepsNumberP2X=
NumStepsNumberP2Y=
NumStepsNumberP2OnCommand=visible,false
#--#
JumpsNumberP1X=SCREEN_CENTER_X-30
JumpsNumberP1Y=SCREEN_CENTER_Y+77
JumpsNumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
JumpsNumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0

JumpsNumberP2X=SCREEN_CENTER_X+381
JumpsNumberP2Y=SCREEN_CENTER_Y+77
JumpsNumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
JumpsNumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
HoldsNumberP1X=SCREEN_CENTER_X-30
HoldsNumberP1Y=SCREEN_CENTER_Y+77+16
HoldsNumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
HoldsNumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0

HoldsNumberP2X=SCREEN_CENTER_X+381
HoldsNumberP2Y=SCREEN_CENTER_Y+77+16
HoldsNumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
HoldsNumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
MinesNumberP1X=SCREEN_CENTER_X-30
MinesNumberP1Y=SCREEN_CENTER_Y+77+16*2
MinesNumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
MinesNumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0

MinesNumberP2X=SCREEN_CENTER_X+381
MinesNumberP2Y=SCREEN_CENTER_Y+77+16*2
MinesNumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
MinesNumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
HandsNumberP1X=SCREEN_CENTER_X-30
HandsNumberP1Y=SCREEN_CENTER_Y+77+16*3
HandsNumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
HandsNumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0

HandsNumberP2X=SCREEN_CENTER_X+381
HandsNumberP2Y=SCREEN_CENTER_Y+77+16*3
HandsNumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
HandsNumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0
#--#
RollsNumberP1X=SCREEN_CENTER_X-30
RollsNumberP1Y=SCREEN_CENTER_Y+77+16*4
RollsNumberP1OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_1);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
RollsNumberP1OffCommand=finishtweening;linear,0.2;diffusealpha,0

RollsNumberP2X=SCREEN_CENTER_X+381
RollsNumberP2Y=SCREEN_CENTER_Y+77+16*4
RollsNumberP2OnCommand=draworder,4;diffuse,PlayerColor(PLAYER_2);diffusealpha,0;zoom,0.7;sleep,3.60;linear,0.4;zoom,0.5;diffusealpha,1;horizalign,right
RollsNumberP2OffCommand=finishtweening;linear,0.2;diffusealpha,0

# no, wolfman, nobody cares about lifts or fakes
LiftsNumberP1X=
LiftsNumberP1Y=
LiftsNumberP1OnCommand=visible,false
LiftsNumberP2X=
LiftsNumberP2Y=
LiftsNumberP2OnCommand=visible,false
#--#
FakesNumberP1X=
FakesNumberP1Y=
FakesNumberP1OnCommand=visible,false
FakesNumberP2X=
FakesNumberP2Y=
FakesNumberP2OnCommand=visible,false

PlayerOptionsP1X=SCREEN_CENTER_X-170
PlayerOptionsP1Y=SCREEN_CENTER_Y-72
PlayerOptionsP1OnCommand=draworder,101;zoom,0.6;shadowlength,2;diffusealpha,0;sleep,3;linear,0.8;diffusealpha,1;maxwidth,480
PlayerOptionsP1OffCommand=finishtweening;linear,0.2;diffusealpha,0

PlayerOptionsP2X=SCREEN_CENTER_X+240
PlayerOptionsP2Y=SCREEN_CENTER_Y-72
PlayerOptionsP2OnCommand=draworder,101;zoom,0.6;shadowlength,2;diffusealpha,0;sleep,3;linear,0.8;diffusealpha,1;maxwidth,480
PlayerOptionsP2OffCommand=finishtweening;linear,0.2;diffusealpha,0

SongOptionsX=SCREEN_CENTER_X
SongOptionsY=SCREEN_CENTER_Y+205
SongOptionsOnCommand=draworder,101;zoom,0.6;shadowlength,2;diffusealpha,0;sleep,3;linear,0.8;diffusealpha,1;maxwidth,768
SongOptionsOffCommand=

ShowPointsArea=true
PercentFrameP1X=
PercentFrameP1Y=
PercentFrameP1OnCommand=visible,false
PercentFrameP1OffCommand=
PercentFrameP2X=
PercentFrameP2Y=
PercentFrameP2OnCommand=visible,false
PercentFrameP2OffCommand=

ShowStepsDisplay=true
StepsDisplayP1X=SCREEN_CENTER_X-360+EvalX()
StepsDisplayP1Y=SCREEN_CENTER_Y-105
StepsDisplayP1OnCommand=addx,-SCREEN_WIDTH/1;sleep,3;decelerate,0.3;addx,SCREEN_WIDTH/1
StepsDisplayP1OffCommand=accelerate,0.3;addx,-SCREEN_WIDTH/1

StepsDisplayP2X=SCREEN_CENTER_X+358+EvalX()
StepsDisplayP2Y=SCREEN_CENTER_Y-105
StepsDisplayP2OnCommand=addx,SCREEN_WIDTH/1;sleep,3;decelerate,0.3;addx,-SCREEN_WIDTH/1
StepsDisplayP2OffCommand=accelerate,0.3;addx,SCREEN_WIDTH/1

PercentP1X=SCREEN_CENTER_X-172+EvalX()
PercentP1Y=SCREEN_CENTER_Y-47
PercentP1OnCommand=zoomx,0.65;zoomy,0.55;draworder,400;diffuse,PlayerColor(PLAYER_1);addx,-EvalTweenDistance();sleep,3;decelerate,0.3;addx,EvalTweenDistance()
PercentP1OffCommand=accelerate,0.3;addx,-EvalTweenDistance()

PercentP2X=SCREEN_CENTER_X+240+EvalX()
PercentP2Y=SCREEN_CENTER_Y-47
PercentP2OnCommand=zoomx,0.65;zoomy,0.55;draworder,400;diffuse,PlayerColor(PLAYER_2);addx,EvalTweenDistance();sleep,3;decelerate,0.3;addx,-EvalTweenDistance()
PercentP2OffCommand=accelerate,0.3;addx,EvalTweenDistance()

# record text
MachineRecordP1X=SCREEN_CENTER_X-200+EvalX()
MachineRecordP1Y=SCREEN_CENTER_Y+9999
MachineRecordP1OnCommand=zoomx,.6;zoomy,.5;shadowlength,2;cropright,1;sleep,3;linear,.3;cropright,0;diffuseshift;effectcolor1,color("0.5,0.5,0.5,1")
MachineRecordP1OffCommand=accelerate,0.3;addx,-EvalTweenDistance()

MachineRecordP2X=SCREEN_CENTER_X+200+EvalX()
MachineRecordP2Y=SCREEN_CENTER_Y+9999
MachineRecordP2OnCommand=zoomx,.6;zoomy,.5;shadowlength,2;cropleft,1;sleep,3;linear,.3;cropleft,0;diffuseshift;effectcolor1,color("0.5,0.5,0.5,1")
MachineRecordP2OffCommand=accelerate,0.3;addx,EvalTweenDistance()
#--#
PersonalRecordP1X=SCREEN_CENTER_X-175+EvalX()
PersonalRecordP1Y=SCREEN_CENTER_Y-23
PersonalRecordP1OnCommand=shadowlength,2;cropright,1;sleep,3;linear,.3;cropright,0;diffuseshift;effectcolor1,color("0.5,0.5,0.5,1")
PersonalRecordP1OffCommand=accelerate,0.3;addx,-EvalTweenDistance()

PersonalRecordP2X=SCREEN_CENTER_X+245+EvalX()
PersonalRecordP2Y=SCREEN_CENTER_Y-23
PersonalRecordP2OnCommand=shadowlength,2;cropleft,1;sleep,3;linear,.3;cropleft,0;diffuseshift;effectcolor1,color("0.5,0.5,0.5,1")
PersonalRecordP2OffCommand=accelerate,0.3;addx,EvalTweenDistance()

ShowPeakComboAward=true
PeakComboAwardP1X=SCREEN_CENTER_X-292
PeakComboAwardP1Y=SCREEN_CENTER_Y+162
#zoom,.4;
PeakComboAwardP1OnCommand=draworder,110;addx,-EvalTweenDistance();sleep,3;decelerate,0.3;addx,EvalTweenDistance()
PeakComboAwardP1OffCommand=accelerate,.3;addx,-EvalTweenDistance()
PeakComboAwardP2X=SCREEN_CENTER_X+111
PeakComboAwardP2Y=SCREEN_CENTER_Y+162
#zoom,.4;
PeakComboAwardP2OnCommand=draworder,110;addx,EvalTweenDistance();sleep,3;decelerate,0.3;addx,-EvalTweenDistance()
PeakComboAwardP2OffCommand=accelerate,.3;addx,EvalTweenDistance()

ShowStageAward=true
StageAwardP1X=SCREEN_CENTER_X-110
StageAwardP1Y=SCREEN_CENTER_Y+162
StageAwardP1OnCommand=draworder,110;addx,-EvalTweenDistance();sleep,3;decelerate,0.3;addx,EvalTweenDistance()
StageAwardP1OffCommand=accelerate,.3;addx,-EvalTweenDistance()
StageAwardP2X=SCREEN_CENTER_X+291
StageAwardP2Y=SCREEN_CENTER_Y+162
StageAwardP2OnCommand=draworder,110;zoom,.4;addx,EvalTweenDistance();sleep,3;decelerate,0.3;addx,-EvalTweenDistance()
StageAwardP2OffCommand=accelerate,.3;addx,EvalTweenDistance()

[ScreenEvaluationSummary]
Fallback="ScreenEvaluation"
NextScreen=Branch.AfterSummary()

Summary=true
HeaderOnCommand=visible,false

SmallBanner1X=SCREEN_CENTER_X-72
SmallBanner1Y=SCREEN_TOP+100-24
SmallBanner1OnCommand=zoom,0.5
SmallBanner1OffCommand=

SmallBanner2X=SCREEN_CENTER_X-48
SmallBanner2Y=SCREEN_TOP+100-16
SmallBanner2OnCommand=zoom,0.5
SmallBanner2OffCommand=

SmallBanner3X=SCREEN_CENTER_X-24
SmallBanner3Y=SCREEN_TOP+100-8
SmallBanner3OnCommand=zoom,0.5
SmallBanner3OffCommand=

SmallBanner4X=SCREEN_CENTER_X+24
SmallBanner4Y=SCREEN_TOP+100+8
SmallBanner4OnCommand=zoom,0.5
SmallBanner4OffCommand=

SmallBanner5X=SCREEN_CENTER_X+48
SmallBanner5Y=SCREEN_TOP+100+16
SmallBanner5OnCommand=zoom,0.5
SmallBanner5OfCommand=

SmallBanner6X=SCREEN_CENTER_X+72
SmallBanner6Y=SCREEN_TOP+100+24
SmallBanner6OnCommand=zoom,0.5
SmallBanner6OffCommand=


[ScreenEvaluation Percent]
PercentP1X=0
PercentP1Y=0
PercentP1OnCommand=shadowlength,0
PercentP1OffCommand=
PercentP2X=0
PercentP2Y=0
PercentP2OnCommand=shadowlength,0
PercentP2OffCommand=
PercentRemainderP1X=0
PercentRemainderP1Y=0
PercentRemainderP1OnCommand=horizalign,left;vertalign,bottom;zoom,0.5;shadowlength,0
PercentRemainderP1OffCommand=sleep,0.8;accelerate,0.3;addx,-SCREEN_WIDTH/2
PercentRemainderP2X=0
PercentRemainderP2Y=0
PercentRemainderP2OnCommand=horizalign,left;vertalign,bottom;zoom,0.5;shadowlength,0
PercentRemainderP2OffCommand=sleep,0.8;accelerate,0.3
PercentUseRemainder=false

[ScreenEvaluationNormal]
Fallback="ScreenEvaluation"
ShowHeader=true

ShowSongInformation=true
SongInformationX=SCREEN_CENTER_X
SongInformationY=SCREEN_TOP+82
SongInformationOnCommand=playcommand,"Set";draworder,105;zoom,0;sleep,3;decelerate,0.5;zoom,0.5
SongInformationOffCommand=zoom,0.5;sleep,0;decelerate,0.2;zoom,0

ShowGraphDisplay=true
GraphDisplayP1X=SCREEN_CENTER_X-206.9
GraphDisplayP1Y=SCREEN_CENTER_Y+17
GraphDisplayP1OnCommand=draworder,500;addx,-EvalTweenDistance();sleep,3;decelerate,0.3;addx,EvalTweenDistance()
GraphDisplayP1OffCommand=accelerate,0.3;addx,-EvalTweenDistance()

ShowComboGraph=true
ComboGraphP1X=SCREEN_CENTER_X-206.9
ComboGraphP1Y=SCREEN_CENTER_Y+39
ComboGraphP1OnCommand=draworder,600;addx,-EvalTweenDistance();sleep,3;decelerate,0.3;addx,EvalTweenDistance()
ComboGraphP1OffCommand=accelerate,0.3;addx,-EvalTweenDistance()

GraphDisplayP2X=SCREEN_CENTER_X+204.1
GraphDisplayP2Y=SCREEN_CENTER_Y+17
GraphDisplayP2OnCommand=draworder,500;addx,EvalTweenDistance();sleep,3;decelerate,0.3;addx,-EvalTweenDistance()
GraphDisplayP2OffCommand=accelerate,0.3;addx,EvalTweenDistance()

ComboGraphP2X=SCREEN_CENTER_X+204.1
ComboGraphP2Y=SCREEN_CENTER_Y+39
ComboGraphP2OnCommand=draworder,500;addx,EvalTweenDistance();sleep,3;decelerate,0.3;addx,-EvalTweenDistance()
ComboGraphP2OffCommand=accelerate,0.3;addx,EvalTweenDistance()

[StepsDisplayEvaluation]
Fallback="StepsDisplayGameplay"

DescriptionX=-8
DescriptionY=0

ShowDescription=true
DescriptionOnCommand=zoom,0.5;shadowlength,2;
DescriptionSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(ContrastingDifficultyColor(param.CustomDifficulty));\
	end \
end;

ShowMeter=true
MeterX=27
MeterY=0
MeterOnCommand=zoom,0.5;shadowlength,2;
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(ContrastingDifficultyColor(param.CustomDifficulty));\
	end \
end;

[GraphDisplay]
BodyWidth=368
BodyHeight=56

[GraphDisplayP1]
Fallback="GraphDisplay"
[GraphDisplayP2]
Fallback="GraphDisplay"

[ComboGraph]
BodyWidth=368

[ComboGraphP1]
Fallback="ComboGraph"

[ComboGraphP2]
Fallback="ComboGraph"

[ScreenFeatureOptions]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="1,2,3,4,5,6"
Line1="lua,ThemePrefRow('ITG2Logo')"
Line2="lua,ThemePrefRow('CurvedMusicWheel')"
Line3="lua,ThemePrefRow('Force1PGamemode')"
Line4="lua,ThemePrefRow('NextGrade')"
Line5="lua,ThemePrefRow('SurroundLife')"
Line6="lua,ThemePrefRow('ThemeColor')"


[ScreenOptionsService]
ShowHeader=false

LineNames="Advanced,Appearance,Arcade,Sync,KeyConfig,GraphicSound,Features,Input,Network,GameType,Theme,Profiles,Reload,TestInput,UI,Credits"
LineTheme="gamecommand;screen,ScreenOptionsTheme;name,Theme Options"
LineFeatures="gamecommand;screen,ScreenFeatureOptions;name,Features"

# ScreenOptionsSystemDirection"

NumRowsShown=8
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y(SCREEN_CENTER_Y-130+30*offsetFromCenter) end

SeparateExitRow=true
SeparateExitRowY=SCREEN_CENTER_Y+112

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+152
ExplanationTogetherOnCommand=zoom,0.5;wrapwidthpixels,1000;vertalign,top;cropright,1;linear,0.5;cropright,0

[ScreenOptionsServiceChild]
ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+158
ExplanationTogetherOnCommand=zoom,0.5;wrapwidthpixels,1000;cropright,1;linear,0.5;cropright,0

LineHighlightP1OnCommand=x,490;zoomto,619.5,31;ztest,true;blend,Blend.Add;diffuseshift;effectcolor1,color("#ffa800");effectcolor2,color("#ffeecc");diffusealpha,0.5
LineHighlightP1ChangeCommand=
LineHighlightP1ChangeToExitCommand=

LineHighlightP2OnCommand=x,490;zoomto,619.5,31;ztest,true;blend,Blend.Add;diffuseshift;effectcolor1,color("#ffa800");effectcolor2,color("#ffeecc");diffusealpha,0.5
LineHighlightP2ChangeCommand=
LineHighlightP2ChangeToExitCommand=

[ScreenOptionsManageProfiles]
OptionRowNormalMetricsGroup="OptionRowProfile"
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y(SCREEN_CENTER_Y-130+30*offsetFromCenter) end

SeparateExitRow=true
SeparateExitRowY=SCREEN_CENTER_Y+112

ExplanationTogetherX=SCREEN_CENTER_X-266
ExplanationTogetherY=SCREEN_CENTER_Y+132
ExplanationTogetherOnCommand=zoom,0.5;wrapwidthpixels,1000;vertalign,top;horizalign,left;cropright,1;linear,0.5;cropright,0

[OptionRowProfile]
Fallback="OptionRow"
ShowUnderlines=false
TitleX=SCREEN_CENTER_X-176
ItemsStartX=SCREEN_CENTER_X-216
ItemOnCommand=shadowlength,0;zoom,0.65;

[ScreenOptionsArcade]
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"

[ScreenTestInput]
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"

[ScreenOptionsExtended]
NumRowsShown=9

LineNames="Sync,3,10,11,4,5"

[ScreenMapControllers]
ButtonsToMap="Up,Down,Left,Right,Start,Select,Back"

DevicesX=SCREEN_CENTER_X+280
DevicesY=SCREEN_BOTTOM-102
DevicesOnCommand=zoom,0.4;draworder,5;halign,1;valign,0;
DevicesOffCommand=

LabelP1OnCommand=x,SCREEN_CENTER_X-272;y,-2.5;halign,0;zoom,0.7;shadowlength,1;diffuse,PlayerColor(PLAYER_1)
LabelP1OffCommand=linear,0.5;diffusealpha,0
LabelP2OnCommand=x,SCREEN_CENTER_X+272;y,-2.5;halign,1;zoom,0.7;shadowlength,1;diffuse,PlayerColor(PLAYER_2)
LabelP2OffCommand=linear,0.5;diffusealpha,0

LineScrollerOnCommand=%function(self) self:draworder(-1); self:y(122) self:setsecondsperitem(0) self:SetTransformFromHeight(28) end
LineScrollerOffCommand=
LineHideCommand=visible,false
LineOnCommand=%function(self) self:y(0); self:visible(true); local LeftToRight = math.mod(self.ItemIndex, 2) == 0 and 1 or -1; self:addx(-SCREEN_WIDTH * LeftToRight); end
LineOffCommand=%function(self) local LeftToRight = math.mod(self.ItemIndex, 2) == 0 and 1 or -1; self:stoptweening() self:accelerate(0.3); self:addx(SCREEN_WIDTH * LeftToRight); self:queuecommand('Hide') end

MappedToP1S1Command=x,SCREEN_CENTER_X-244
MappedToP1S2Command=x,SCREEN_CENTER_X-180
MappedToP1S3Command=x,SCREEN_CENTER_X-116

PrimaryOnCommand=x,SCREEN_CENTER_X-36;zoom,0.5;shadowlength,1;ztest,true
SecondaryOnCommand=x,SCREEN_CENTER_X+26;zoom,0.4;shadowlength,1;ztest,true

MappedToP2S1Command=x,SCREEN_CENTER_X+122
MappedToP2S2Command=x,SCREEN_CENTER_X+186
MappedToP2S3Command=x,SCREEN_CENTER_X+244

MappedToOnCommand=diffuse,color("#808080");shadowlength,0;maxwidth,150;zoom,0.4
MappedToWaitingCommand=diffuse,color("#FF8080");pulse;effectperiod,0.5;effectmagnitude,0.8,1.3,0
MappedToMappedInputCommand=diffuse,color("#808080");diffuseshift;effectcolor2,color("#808080");effectcolor1,color("#FFFFFF")
MappedToGainFocusCommand=diffuse,color("#808080");diffuseshift;effectcolor2,color("#808080");effectcolor1,color("#FFFFFF")
MappedToLoseFocusCommand=diffuse,color("#808080");stopeffect

[ScreenGameplaySyncMachine]
ShowStageDisplay=false
LifeP1OnCommand=visible,false
LifeP2OnCommand=visible,false
StepsDisplayP1OnCommand=visible,false
StepsDisplayP2OnCommand=visible,false

[ScreenOptionsTheme]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="gNotePos,gAuto,gScore,gSDisp,TimingDisplay,gOpts,gLongFail,gComboUnderField,BeginnerHelper"
LinegNotePos="lua,ThemePrefRow('NotePosition')"
LinegScore="lua,ThemePrefRow('GameplayShowScore')"
LinegSDisp="lua,ThemePrefRow('GameplayShowStepsDisplay')"
LineTimingDisplay="lua,ThemePrefRow('TimingDisplay')"
LinegOpts="lua,ThemePrefRow('ShowLotsaOptions')"
LinegAuto="lua,ThemePrefRow('AutoSetStyle')"
LinegLongFail="lua,ThemePrefRow('LongFail')"
LinegComboUnderField="lua,ThemePrefRow('ComboUnderField')"
LineBeginnerHelper="lua,ThemePrefRow('BeginnerHelper')"

[ScreenTextEntry]
ShowHeader=false

QuestionX=SCREEN_CENTER_X
QuestionY=SCREEN_CENTER_Y-64
QuestionOnCommand=wrapwidthpixels,600*1.25;zoom,0.75
AnswerOnCommand=shadowlength,0

####
[ScreenOptionsEdit]
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y(SCREEN_CENTER_Y-130+30*offsetFromCenter) end

MoreX=SCREEN_CENTER_X
MoreY=SCREEN_CENTER_Y-4
MoreOnCommand=
MoreExitSelectedP1Command=
MoreExitSelectedP2Command=
MoreExitUnselectedP1Command=
MoreExitUnselectedP2Command=

ExplanationTogetherX=SCREEN_CENTER_X
ExplanationTogetherY=SCREEN_CENTER_Y+152
ExplanationTogetherOnCommand=zoom,0.5;wrapwidthpixels,1000;vertalign,top;cropright,1;linear,0.5;cropright,0

[ScreenEditMenu]
ShowHelpText=true

ExplanationX=SCREEN_CENTER_X
ExplanationY=SCREEN_CENTER_Y+145
ExplanationOnCommand=zoom,0.5;wrapwidthpixels,1000;vertalign,top;cropright,1;linear,0.5;cropright,0

[EditMenu]
Arrows1X=SCREEN_CENTER_X-200
Arrows2X=SCREEN_CENTER_X+300
ArrowsEnabledCommand=diffuse,color("1,1,1,1")
ArrowsDisabledCommand=diffuse,color("0.4,0.4,0.4,1")

GroupBannerX=SCREEN_CENTER_X+190
GroupBannerY=SCREEN_CENTER_Y-140
GroupBannerOnCommand=scaletoclipped,120,40

SongBannerX=SCREEN_CENTER_X+190
SongBannerY=SCREEN_CENTER_Y-90
SongBannerOnCommand=scaletoclipped,120,40

TextBannerType="TextBannerEditMode"
SongTextBannerX=SCREEN_CENTER_X+120
SongTextBannerY=SCREEN_CENTER_Y-90

StepsDisplayX=SCREEN_CENTER_X+170
StepsDisplayY=SCREEN_CENTER_Y-10
StepsDisplaySourceX=SCREEN_CENTER_X+170
StepsDisplaySourceY=SCREEN_CENTER_Y+50

RowLabelX=WideScale(SCREEN_CENTER_X-240,SCREEN_CENTER_X-372)
LabelOnCommand=zoom,0.6

Row1Y=SCREEN_CENTER_Y-140
Row2Y=SCREEN_CENTER_Y-90
Row3Y=SCREEN_CENTER_Y-40
Row4Y=SCREEN_CENTER_Y-10
Row5Y=SCREEN_CENTER_Y+20
Row6Y=SCREEN_CENTER_Y+50
Row7Y=SCREEN_CENTER_Y+80

Label1X=THEME:GetMetric("EditMenu","RowLabelX")
Label1OnCommand=zoom,0.6;halign,0
Label2X=THEME:GetMetric("EditMenu","RowLabelX")
Label2OnCommand=zoom,0.6;halign,0
Label3X=THEME:GetMetric("EditMenu","RowLabelX")
Label3OnCommand=zoom,0.6;halign,0
Label4X=THEME:GetMetric("EditMenu","RowLabelX")
Label4OnCommand=zoom,0.6;halign,0
Label5X=THEME:GetMetric("EditMenu","RowLabelX")
Label5OnCommand=zoom,0.6;halign,0
Label6X=THEME:GetMetric("EditMenu","RowLabelX")
Label6OnCommand=zoom,0.6;halign,0
Label7X=THEME:GetMetric("EditMenu","RowLabelX")
Label7OnCommand=zoom,0.6;halign,0

Value1X=SCREEN_CENTER_X+120
Value1OnCommand=zoom,0.6;halign,1
Value2X=SCREEN_CENTER_X
Value2OnCommand=zoom,0.6;
Value3X=SCREEN_CENTER_X
Value3OnCommand=zoom,0.6;
Value4X=SCREEN_CENTER_X
Value4OnCommand=zoom,0.6;
Value5X=SCREEN_CENTER_X
Value5OnCommand=zoom,0.6;
Value6X=SCREEN_CENTER_X
Value6OnCommand=zoom,0.6;
Value7X=SCREEN_CENTER_X
Value7OnCommand=zoom,0.6;

[StepsDisplayEdit]
CapitalizeDifficultyNames=true
ZeroMeterString=""

ShowMeter=true
MeterX=-110
MeterY=0
MeterOnCommand=zoom,0.3
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
		self:diffusetopedge(ContrastingDifficultyColor(param.CustomDifficulty)) \
	end \
end

ShowTicks=true
NumTicks=13
MaxTicks=14
TicksX=110
TicksY=1
TicksOnCommand=halign,1;shadowlength,1;
TicksSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
	end \
end

ShowDescription=false

DescriptionX=0
DescriptionY=30
DescriptionOnCommand=zoom,1;shadowlength,2;maxwidth,112
DescriptionSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
		self:uppercase( param.CustomDifficulty ~= "EDIT" ) \
		self:uppercase( param.CustomDifficulty ~= "MEDIUM" ) \
	end \
	if param.Steps and param.Steps:IsAnEdit() and param.Steps:GetDescription() == "" then \
		self:settext("Untitled") \
	end \
end

[ScreenEdit]
EditHelpX=SCREEN_LEFT+20
EditHelpY=SCREEN_TOP+64
EditHelpOnCommand=visible,false

InfoX=SCREEN_RIGHT-160
InfoY=SCREEN_TOP+25
InfoOnCommand=halign,0;valign,0;zoom,0.4;shadowlength,1

PlayRecordHelpX=SCREEN_CENTER_X
PlayRecordHelpY=SCREEN_BOTTOM-20
PlayRecordHelpOnCommand=zoom,0.5;valign,0;shadowlength,1

LoopOnChartEnd=false

CurrentBeatFormat="%s:\n  %.3f\n"
CurrentSecondFormat="%s:\n  %.3f\n"
SnapToFormat="%s: %s\n"
SelectionBeatBeginFormat="%s:\n  %.3f"
SelectionBeatUnfinishedFormat=" ...\n"
SelectionBeatEndFormat="-%.3f\n"
DifficultyFormat="%s:\n  %s\n"
RoutinePlayerFormat="%s: %d\n"
DescriptionFormat="%s:\n  %s\n"
StepAuthorFormat="%s:\n  %s\n"
ChartNameFormat="%s:\n  %s\n"
ChartStyleFormat="%s:\n  %s\n"
MainTitleFormat="%s:\n  %s\n"
SubtitleFormat="%s:\n  %s\n"
TapNoteTypeFormat="%s: %s\n"
SegmentTypeFormat="%s: %s\n"
NumStepsFormat="%s: %d\n"
NumJumpsFormat="%s: %d\n"
NumHoldsFormat="%s: %d\n"
NumMinesFormat="%s: %d\n"
NumHandsFormat="%s: %d\n"
NumRollsFormat="%s: %d\n"
NumLiftsFormat="%s: %d\n"
NumFakesFormat="%s: %d\n"
NumStepsFormatTwoPlayer="%s: %d/%d\n"
NumJumpsFormatTwoPlayer="%s: %d/%d\n"
NumHoldsFormatTwoPlayer="%s: %d/%d\n"
NumMinesFormatTwoPlayer="%s: %d/%d\n"
NumHandsFormatTwoPlayer="%s: %d/%d\n"
NumRollsFormatTwoPlayer="%s: %d/%d\n"
NumLiftsFormatTwoPlayer="%s: %d/%d\n"
NumFakesFormatTwoPlayer="%s: %d/%d\n"
TimingModeFormat="%s:\n  %s\n"
Beat0OffsetFormat="%s:\n  %.3f secs\n"
PreviewStartFormat="%s:\n  %.3f secs\n"
PreviewLengthFormat="%s:\n  %.3f secs\n"

FadeInPreview=0
FadeOutPreview=1.5

[ScreenMiniMenu]
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) local indexOffset = itemIndex-(numItems-1)/2; self:y( (SCREEN_CENTER_Y)+(indexOffset*22) ); end

[OptionRowMiniMenu]
TitleOnCommand=halign,0;shadowlength,2;zoom,0.74

ItemsStartX=SCREEN_CENTER_X-160
ItemsEndX=SCREEN_CENTER_X+280
ItemsGapX=14
ItemsLongRowP1X=SCREEN_CENTER_X-60
ItemsLongRowP2X=SCREEN_CENTER_X+100
ItemsLongRowSharedX=SCREEN_CENTER_X+150
ItemOnCommand=zoom,0.5

[ScreenPrompt]
ShowHeader=false

[ScreenJukebox]
ShowStageDisplay=false

################################################################################
[ScreenRecordsMenu]
Class="ScreenOptionsMaster"
Fallback="ScreenOptionsSimpleService"
NextScreen="ScreenTitleMenu"
PrevScreen="ScreenTitleMenu"
AllowOperatorMenuButton=false

LineNames="1,2,3,4,5,6,7,8,9,10"
Line1="gamecommand;name,RecordsSummarySingle;screen,ScreenSummarySingle"
Line2="gamecommand;name,RecordsSummaryDouble;screen,ScreenSummaryDouble"
Line3="gamecommand;name,RecordsGradesSingle;screen,ScreenGradesSingle"
Line4="gamecommand;name,RecordsGradesDouble;screen,ScreenGradesDouble"
Line5="gamecommand;name,RecordsSongsSingle;screen,ScreenRecordsSongsSingle"
Line6="gamecommand;name,RecordsSongsDouble;screen,ScreenRecordsSongsDouble"
Line7="gamecommand;name,RecordsNonstopSingle;screen,ScreenRecordsNonstopSingle"
Line8="gamecommand;name,RecordsNonstopDouble;screen,ScreenRecordsNonstopDouble"
Line9="gamecommand;name,RecordsCoursesSingle;screen,ScreenRecordsSurvivalSingle"
Line10="gamecommand;name,RecordsCoursesDouble;screen,ScreenRecordsSurvivalDouble"

NumRowsShown=8
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) self:y(SCREEN_CENTER_Y-130+30*offsetFromCenter) end

[ScreenRecordSummary]
Fallback="ScreenSelectMaster"
PrevScreen="ScreenRecordsMenu"
TimerSeconds=-1
ChoiceNames="1"
DefaultChoice="1"
Choice1="screen,ScreenRecordsMenu"

[ScreenSummarySingle]
Fallback="ScreenRecordSummary"
[ScreenSummaryDouble]
Fallback="ScreenRecordSummary"

[ScreenGradesSingle]
Fallback="ScreenRecordSummary"
[ScreenGradesDouble]
Fallback="ScreenRecordSummary"

[ScreenRecordScroller]
Class="ScreenHighScores"
Fallback="ScreenWithMenuElements"
NextScreen="ScreenRecordsMenu"
PrevScreen="ScreenRecordsMenu"
TimerSeconds=-1
ForceTimer=false

LightsMode="LightsMode_MenuStartAndDirections"
ResetGameState=false
BackGoesToStartScreen=false
AttractVolume=false

ManualScrolling=true
MaxItemsToShow=1024

ScrollerOnCommand=CenterX;y,SCREEN_CENTER_Y+64;
ScrollerItemTransformFunction=function(self,offset,itemIndex,numItems) self:y(65*offset) end
ScrollerItemsToDraw=7
ScrollerSecondsPerItem=0.15
ScrollerScrolledMessageCommand=finishtweening

[ScreenRecordsSongsSingle]
Fallback="ScreenRecordScroller"
StepsTypesToHide="dance-double,dance-couple,dance-solo"

HighScoresType="HighScoresType_AllSteps"
NumColumns=4
ColumnDifficulty1="Difficulty_Easy"
ColumnDifficulty2="Difficulty_Medium"
ColumnDifficulty3="Difficulty_Hard"
ColumnDifficulty4="Difficulty_Challenge"
ColumnStepsType1="StepsType_Dance_Single"
ColumnStepsType2="StepsType_Dance_Single"
ColumnStepsType3="StepsType_Dance_Single"
ColumnStepsType4="StepsType_Dance_Single"

[ScreenRecordsSongsDouble]
Fallback="ScreenRecordScroller"
StepsTypesToHide="dance-single,dance-couple,dance-solo"

HighScoresType="HighScoresType_AllSteps"
NumColumns=4
ColumnDifficulty1="Difficulty_Easy"
ColumnDifficulty2="Difficulty_Medium"
ColumnDifficulty3="Difficulty_Hard"
ColumnDifficulty4="Difficulty_Challenge"
ColumnStepsType1="StepsType_Dance_Double"
ColumnStepsType2="StepsType_Dance_Double"
ColumnStepsType3="StepsType_Dance_Double"
ColumnStepsType4="StepsType_Dance_Double"

[ScreenRecordsNonstopSingle]
Fallback="ScreenRecordScroller"
StepsTypesToHide="dance-double,dance-couple,dance-solo"

HighScoresType="HighScoresType_NonstopCourses"

NumColumns=2
ColumnDifficulty1="Difficulty_Medium"
ColumnDifficulty2="Difficulty_Hard"
ColumnStepsType1="StepsType_Dance_Single"
ColumnStepsType2="StepsType_Dance_Single"

[ScreenRecordsNonstopDouble]
Fallback="ScreenRecordScroller"
StepsTypesToHide="dance-single,dance-couple,dance-solo"

HighScoresType="HighScoresType_NonstopCourses"

NumColumns=2
ColumnDifficulty1="Difficulty_Medium"
ColumnDifficulty2="Difficulty_Hard"
ColumnStepsType1="StepsType_Dance_Double"
ColumnStepsType2="StepsType_Dance_Double"

[ScreenRecordsSurvivalSingle]
Fallback="ScreenRecordScroller"
StepsTypesToHide="dance-double,dance-couple,dance-solo"

HighScoresType="HighScoresType_SurvivalCourses"

NumColumns=1
ColumnDifficulty1="Difficulty_Medium"
ColumnStepsType1="StepsType_Dance_Single"

[ScreenRecordsSurvivalDouble]
Fallback="ScreenRecordScroller"
StepsTypesToHide="dance-double,dance-couple,dance-solo"

HighScoresType="HighScoresType_SurvivalCourses"

NumColumns=1
ColumnDifficulty1="Difficulty_Medium"
ColumnStepsType1="StepsType_Dance_Single"

[ScreenNotAllowed]
Class="ScreenWithMenuElements"
Fallback="ScreenWithMenuElements"